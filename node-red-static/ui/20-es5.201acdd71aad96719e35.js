!function(){function o(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function i(o,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,r.key,r)}}function n(o,n,r){return n&&i(o.prototype,n),r&&i(o,r),o}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{PAky:function(i,r,e){"use strict";e.r(r),e.d(r,"LoginModule",(function(){return z}));var t=e("bTqV"),a=e("bSwM"),g=e("kmnG"),l=e("NFeN"),s=e("qFsG"),f=e("dNgK"),m=e("tyNb"),p=e("5HBU"),u=e("sYmb"),c=e("3Pt+"),d=e("PVWW"),b=e("fXoL"),h=e("0JVi"),w=e("K9xE"),x=e("EE6d"),v=e("Rea6"),y=e("4WDQ"),k=e("XiUz"),L=e("ofXK");function T(o,i){1&o&&(b.Ub(0,"mat-error"),b.Lc(1," Protenga ID is required "),b.Tb())}function P(o,i){1&o&&(b.Ub(0,"mat-error"),b.Lc(1," Protenga ID is too short "),b.Tb())}function U(o,i){1&o&&(b.Ub(0,"mat-error"),b.Lc(1," Protenga ID should be numeric only "),b.Tb())}function _(o,i){1&o&&(b.Ub(0,"mat-error"),b.Lc(1," Password is required "),b.Tb())}function I(o,i){1&o&&(b.Ub(0,"mat-error"),b.Lc(1," Password is too short "),b.Tb())}var N,O,C=function(){return{duration:"300ms",y:"100px"}},D=function(o){return{value:"*",params:o}},R=function(){return{duration:"300ms",y:"100px"}},S=function(o){return{value:"*",params:o}},q=[{path:"id",component:(N=function(){function i(n,r,e,t,a,g,l,s,f){o(this,i),this._fuseConfigService=n,this._fuseNavigationService=r,this._formBuilder=e,this._login=t,this.translate=a,this._router=g,this.snack=l,this.activatedRoute=s,this.global=f,this.passwordHide=!0,this._fuseConfigService.config={layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}},this._login.isLoggedOn&&this.gotoHome()}return n(i,[{key:"ngOnInit",value:function(){this.setQueryParams(),this.form=this._formBuilder.group({username:["",[c.z.required,c.z.minLength(5),c.z.pattern("^[0-9]*$")]],password:["",[c.z.required,c.z.minLength(8)]]})}},{key:"setQueryParams",value:function(){var o=this;this.activatedRoute.queryParams.subscribe((function(i){o.queryParams=i}))}},{key:"onLogin",value:function(){var o=this;this.form.invalid?this.form.markAllAsTouched():this._login.postLogin(this.form.value).subscribe((function(i){o.onLoginSuccess(i)}),(function(i){o.snack.openDefault("Login not found")}))}},{key:"onLoginSuccess",value:function(o){this._login.jwt=o.token,this._login.user=o,this._login.shouldIdleWatcher(),this.translate.use(this._login.user.lang||"en"),this.resetFuseNavigation(),this.redirect()}},{key:"redirect",value:function(){this.queryParams.redirectPath?this._router.navigateByUrl(this.queryParams.redirectPath):this.gotoHome()}},{key:"resetFuseNavigation",value:function(){this._fuseNavigationService.unregister("main"),this._fuseNavigationService.register("main",this._login.getNavigation()),this._fuseNavigationService.setCurrentNavigation("main"),this.global.resetTranslation("login")}},{key:"gotoHome",value:function(){this._router.navigate(["forms","type"])}},{key:"onKeyDownEsc",value:function(o){this.gotoLoginRFID()}},{key:"gotoLoginRFID",value:function(){this._router.navigate(["login","rfid"],{queryParams:{redirectPath:this.queryParams.redirectPath}})}}]),i}(),N.\u0275fac=function(o){return new(o||N)(b.Ob(h.b),b.Ob(w.a),b.Ob(c.g),b.Ob(x.a),b.Ob(u.d),b.Ob(m.h),b.Ob(v.a),b.Ob(m.a),b.Ob(y.a))},N.\u0275cmp=b.Ib({type:N,selectors:[["login"]],hostBindings:function(o,i){1&o&&b.cc("keydown.esc",(function(o){return i.onKeyDownEsc(o)}),!1,b.wc)},decls:35,vars:16,consts:[["id","login","fxLayout","column"],["id","login-form-wrapper","fxLayout","column","fxLayoutAlign","center center"],["id","login-form"],[1,"logo"],["src","assets/icons/protenga/favicon.png"],[1,"title"],["name","loginForm","novalidate","",3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","formControlName","username"],[4,"ngIf"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","space-between center",1,"remember-forgot-password"],[1,"forgot-password",3,"routerLink"],["mat-raised-button","","color","accent","aria-label","LOG IN","type","submit",1,"submit-button"],[1,"separator"],[1,"text"],["fxLayout","column","fxLayoutAlign","center center",1,"register"],[1,"link","idLogin",3,"routerLink"]],template:function(o,i){1&o&&(b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"div",2),b.Ub(3,"div",3),b.Pb(4,"img",4),b.Tb(),b.Ub(5,"div",5),b.Lc(6,"Insect OS"),b.Tb(),b.Ub(7,"form",6),b.cc("ngSubmit",(function(){return i.onLogin()})),b.Ub(8,"mat-form-field",7),b.Ub(9,"mat-label"),b.Lc(10,"Protenga ID"),b.Tb(),b.Pb(11,"input",8),b.Jc(12,T,2,0,"mat-error",9),b.Jc(13,P,2,0,"mat-error",9),b.Jc(14,U,2,0,"mat-error",9),b.Tb(),b.Ub(15,"mat-form-field",7),b.Ub(16,"mat-label"),b.Lc(17,"Password"),b.Tb(),b.Pb(18,"input",10),b.Ub(19,"button",11),b.cc("click",(function(){return i.passwordHide=!i.passwordHide})),b.Ub(20,"mat-icon"),b.Lc(21),b.Tb(),b.Tb(),b.Jc(22,_,2,0,"mat-error",9),b.Jc(23,I,2,0,"mat-error",9),b.Tb(),b.Ub(24,"div",12),b.Ub(25,"a",13),b.Lc(26," Forgot Password? "),b.Tb(),b.Tb(),b.Ub(27,"button",14),b.Lc(28," LOGIN "),b.Tb(),b.Tb(),b.Ub(29,"div",15),b.Ub(30,"span",16),b.Lc(31,"OR"),b.Tb(),b.Tb(),b.Ub(32,"div",17),b.Ub(33,"a",18),b.Lc(34,"Login Using RFID"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()),2&o&&(b.Cb(2),b.nc("@animate",b.qc(14,D,b.pc(13,C))),b.Cb(5),b.nc("formGroup",i.form),b.Cb(5),b.nc("ngIf",i.form.get("username").hasError("required")),b.Cb(1),b.nc("ngIf",!i.form.get("username").hasError("pattern")&&i.form.get("username").hasError("minlength")),b.Cb(1),b.nc("ngIf",i.form.get("username").hasError("pattern")),b.Cb(4),b.nc("type",i.passwordHide?"password":"text"),b.Cb(1),b.Db("aria-label","Hide password")("aria-pressed",i.passwordHide),b.Cb(2),b.Mc(i.passwordHide?"visibility_off":"visibility"),b.Cb(1),b.nc("ngIf",i.form.get("password").hasError("required")),b.Cb(1),b.nc("ngIf",i.form.get("password").hasError("minlength")),b.Cb(2),b.nc("routerLink","/forgot-password"),b.Cb(8),b.nc("routerLink","/login/rfid"))},directives:[k.c,k.b,c.A,c.t,c.l,g.c,g.g,s.b,c.d,c.s,c.j,L.t,t.b,g.i,l.a,m.k,g.b],styles:['login #login{width:100%;background:url(dark-material-bg.7341604eddeafc0dae94.jpg) no-repeat;background-size:cover}login #login #login-form-wrapper{flex:1 0 auto;padding:32px}@media screen and (max-width:599px){login #login #login-form-wrapper{padding:16px}}login #login #login-form-wrapper #login-form{width:384px;max-width:384px;padding:32px;text-align:center;box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}@media screen and (max-width:599px){login #login #login-form-wrapper #login-form{padding:24px;width:100%}}login #login #login-form-wrapper #login-form .logo{width:128px;margin:32px auto}login #login #login-form-wrapper #login-form .title{font-size:20px;margin:16px 0 32px}login #login #login-form-wrapper #login-form form{width:100%;text-align:left}login #login #login-form-wrapper #login-form form mat-form-field{width:100%}login #login #login-form-wrapper #login-form form mat-checkbox{margin:0}login #login #login-form-wrapper #login-form form .remember-forgot-password{font-size:13px;margin-top:8px}login #login #login-form-wrapper #login-form form .remember-forgot-password .remember-me{margin-bottom:16px}login #login #login-form-wrapper #login-form form .remember-forgot-password .forgot-password{font-size:13px;font-weight:600;margin-bottom:16px}login #login #login-form-wrapper #login-form form .submit-button{width:220px;margin:16px auto;display:block}@media screen and (max-width:599px){login #login #login-form-wrapper #login-form form .submit-button{width:90%}}login #login #login-form-wrapper #login-form .register{margin:32px auto 24px;font-weight:600}login #login #login-form-wrapper #login-form .register .text{margin-right:8px}login #login #login-form-wrapper #login-form .register .idLogin:focus{text-decoration:underline}login #login #login-form-wrapper #login-form .separator{font-size:15px;font-weight:600;margin:24px auto;position:relative;overflow:hidden;width:100px}login #login #login-form-wrapper #login-form .separator .text{display:inline-flex;position:relative;padding:0 8px;z-index:9999}login #login #login-form-wrapper #login-form .separator .text:after,login #login #login-form-wrapper #login-form .separator .text:before{content:"";display:block;width:30px;position:absolute;top:10px;border-top:1px solid}login #login #login-form-wrapper #login-form .separator .text:before{right:100%}login #login #login-form-wrapper #login-form .separator .text:after{left:100%}login #login #login-form-wrapper #login-form button.facebook,login #login #login-form-wrapper #login-form button.google{width:192px;text-transform:none;color:#fff;font-size:13px}@media screen and (max-width:599px){login #login #login-form-wrapper #login-form button{width:80%}}login #login #login-form-wrapper #login-form button.google{background-color:#d73d32;margin-bottom:8px}login #login #login-form-wrapper #login-form button.facebook{background-color:#3f5c9a}'],encapsulation:2,data:{animation:d.a}}),N)},{path:"rfid",component:function(){var i=function(){function i(n,r,e,t,a,g,l,s,f){o(this,i),this._fuseConfigService=n,this._formBuilder=r,this._router=e,this._fuseNavigationService=t,this._login=a,this.snack=g,this.global=l,this.activatedRoute=s,this.translate=f,this._fuseConfigService.config={layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}},this._login.isLoggedOn&&this.gotoHome()}return n(i,[{key:"ngOnInit",value:function(){var o=this;this.setQueryParams(),this.formRFID=this._formBuilder.group({type:["RFID"],username:["",[c.z.required]]}),this.activatedRoute.queryParams.subscribe((function(i){i.access&&(o.formRFID.get("username").setValue(i.access),o._login.jwt||o.onLoginRfid())}))}},{key:"setQueryParams",value:function(){var o=this;this.activatedRoute.queryParams.subscribe((function(i){o.queryParams=i}))}},{key:"onKeyDown",value:function(o){if(new RegExp("^[0-9]+$").test(o.key)){var i=this.formRFID.get("username");i.setValue(i.value+o.key),i.value&&i.value.length>9?(this.onLoginRfid(),i.reset("")):setTimeout((function(){i.reset("")}),1e3)}}},{key:"onLoginRfid",value:function(){var o=this;this._login.postLogin(this.formRFID.value).subscribe((function(i){o.formRFID.get("username").reset(""),o.onLoginSuccess(i)}),(function(i){o.snack.openDefault("Login not found")}))}},{key:"onLoginSuccess",value:function(o){this._login.jwt=o.token,this._login.user=o,this._login.shouldIdleWatcher(),this.translate.use(this._login.user.lang||"en"),this.resetFuseNavigation(),this.redirect()}},{key:"redirect",value:function(){this.queryParams.redirectPath?this._router.navigateByUrl(this.queryParams.redirectPath):this.gotoHome()}},{key:"resetFuseNavigation",value:function(){this._fuseNavigationService.unregister("main"),this._fuseNavigationService.register("main",this._login.getNavigation()),this._fuseNavigationService.setCurrentNavigation("main"),this.global.resetTranslation("login")}},{key:"gotoHome",value:function(){this._router.navigate(["forms","type"])}},{key:"onClickScanRfid",value:function(){this.snack.openDefault("Place RFID Tag on the RFID Scanner")}},{key:"gotoLoginId",value:function(){this._router.navigate(["login","id"],{queryParams:{redirectPath:this.queryParams.redirectPath}})}},{key:"versionNumber",get:function(){return this.global.versionNumber}},{key:"environmentName",get:function(){return this.global.env.environment}}]),i}();return i.\u0275fac=function(o){return new(o||i)(b.Ob(h.b),b.Ob(c.g),b.Ob(m.h),b.Ob(w.a),b.Ob(x.a),b.Ob(v.a),b.Ob(y.a),b.Ob(m.a),b.Ob(u.d))},i.\u0275cmp=b.Ib({type:i,selectors:[["login"]],hostBindings:function(o,i){1&o&&b.cc("keydown",(function(o){return i.onKeyDown(o)}),!1,b.wc)},decls:19,vars:7,consts:[["id","login","fxLayout","column"],["id","login-form-wrapper","fxLayout","column","fxLayoutAlign","center center"],["id","login-form"],[1,"logo"],["src","assets/icons/protenga/favicon.png"],[1,"title"],["name","loginForm","novalidate","",3,"formGroup"],["mat-raised-button","","color","accent","aria-label","LOG IN",1,"submit-button",2,"width","100%","height","16vh",3,"click"],[1,"separator"],[1,"text"],["fxLayout","column","fxLayoutAlign","center center",1,"register"],[1,"idLogin",2,"cursor","pointer",3,"click"]],template:function(o,i){1&o&&(b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"div",2),b.Ub(3,"div",3),b.Pb(4,"img",4),b.Tb(),b.Ub(5,"div",5),b.Lc(6),b.Tb(),b.Ub(7,"form",6),b.Ub(8,"button",7),b.cc("click",(function(){return i.onClickScanRfid()})),b.Lc(9," SCAN RFID "),b.Tb(),b.Tb(),b.Ub(10,"div",8),b.Ub(11,"span",9),b.Lc(12,"OR"),b.Tb(),b.Tb(),b.Ub(13,"div",10),b.Ub(14,"a",11),b.cc("click",(function(){return i.gotoLoginId()})),b.Lc(15,"Login Using Protenga ID"),b.Tb(),b.Tb(),b.Ub(16,"div",8),b.Ub(17,"span",9),b.Lc(18),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()),2&o&&(b.Cb(2),b.nc("@animate",b.qc(5,S,b.pc(4,R))),b.Cb(4),b.Nc("Insect OS - ",i.environmentName,""),b.Cb(1),b.nc("formGroup",i.formRFID),b.Cb(11),b.Mc(i.versionNumber))},directives:[k.c,k.b,c.A,c.t,c.l,t.b],styles:['login #login{width:100%;background:url(dark-material-bg.7341604eddeafc0dae94.jpg) no-repeat;background-size:cover}login #login #login-form-wrapper{flex:1 0 auto;padding:32px}@media screen and (max-width:599px){login #login #login-form-wrapper{padding:16px}}login #login #login-form-wrapper #login-form{width:384px;max-width:384px;padding:32px;text-align:center;box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}@media screen and (max-width:599px){login #login #login-form-wrapper #login-form{padding:24px;width:100%}}login #login #login-form-wrapper #login-form .logo{width:128px;margin:32px auto}login #login #login-form-wrapper #login-form .title{font-size:20px;margin:16px 0 32px}login #login #login-form-wrapper #login-form form{width:100%;text-align:left}login #login #login-form-wrapper #login-form form mat-form-field{width:100%}login #login #login-form-wrapper #login-form form mat-checkbox{margin:0}login #login #login-form-wrapper #login-form form .remember-forgot-password{font-size:13px;margin-top:8px}login #login #login-form-wrapper #login-form form .remember-forgot-password .remember-me{margin-bottom:16px}login #login #login-form-wrapper #login-form form .remember-forgot-password .forgot-password{font-size:13px;font-weight:600;margin-bottom:16px}login #login #login-form-wrapper #login-form form .submit-button{width:220px;margin:16px auto;display:block}@media screen and (max-width:599px){login #login #login-form-wrapper #login-form form .submit-button{width:90%}}login #login #login-form-wrapper #login-form .register{margin:32px auto 24px;font-weight:600}login #login #login-form-wrapper #login-form .register .text{margin-right:8px}login #login #login-form-wrapper #login-form .register .idLogin:focus{text-decoration:underline}login #login #login-form-wrapper #login-form .separator{font-size:15px;font-weight:600;margin:24px auto;position:relative;overflow:hidden;width:100px}login #login #login-form-wrapper #login-form .separator .text{display:inline-flex;position:relative;padding:0 8px;z-index:9999}login #login #login-form-wrapper #login-form .separator .text:after,login #login #login-form-wrapper #login-form .separator .text:before{content:"";display:block;width:30px;position:absolute;top:10px;border-top:1px solid}login #login #login-form-wrapper #login-form .separator .text:before{right:100%}login #login #login-form-wrapper #login-form .separator .text:after{left:100%}login #login #login-form-wrapper #login-form button.facebook,login #login #login-form-wrapper #login-form button.google{width:192px;text-transform:none;color:#fff;font-size:13px}@media screen and (max-width:599px){login #login #login-form-wrapper #login-form button{width:80%}}login #login #login-form-wrapper #login-form button.google{background-color:#d73d32;margin-bottom:8px}login #login #login-form-wrapper #login-form button.facebook{background-color:#3f5c9a}'],encapsulation:2,data:{animation:d.a}}),i}()},{path:"**",redirectTo:"rfid"}],F=[t.c,a.b,g.e,l.b,s.c,f.b],z=((O=function i(){o(this,i)}).\u0275mod=b.Mb({type:O}),O.\u0275inj=b.Lb({factory:function(o){return new(o||O)},imports:[[m.l.forChild(q),u.b,p.a,F]]}),O)}}])}();