(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{pXbF:function(t,e,n){"use strict";n.r(e),n.d(e,"FormSelectionModule",(function(){return P}));var o=n("ofXK"),r=n("tyNb"),i=n("5HBU"),c=n("sYmb"),a=n("+0xr");const s={lang:"en",data:{FORM_FIELD:{INPUT:{PLACEHOLDER:{SEARCH_FOR_FORM:"Search for form"}}},TABLE:{HEADER:{ID:"ID",NAME:"Name",DOMAIN:"Type"}}}},l={lang:"my",data:{FORM_FIELD:{INPUT:{PLACEHOLDER:{SEARCH_FOR_FORM:"Cari borang"}}},TABLE:{HEADER:{ID:"ID",NAME:"Nama",DOMAIN:"Domain"}}}};var d=n("tk/3"),h=n("fXoL"),u=n("7Wwi"),m=n("gPJw"),f=n("hw3O"),b=n("XiUz"),p=n("NFeN"),g=n("3Pt+"),w=n("/1cH"),C=n("FKr1");const x=["searchInput"];function y(t,e){if(1&t&&(h.Ub(0,"span"),h.Lc(1),h.Tb()),2&t){const t=h.gc().$implicit;h.Cb(1),h.Nc("(",t.line,")")}}function F(t,e){if(1&t&&(h.Ub(0,"mat-option",20),h.Lc(1),h.Jc(2,y,2,1,"span",21),h.Tb()),2&t){const t=e.$implicit;h.nc("value",t),h.Cb(1),h.Nc(" ",t.form," "),h.Cb(1),h.nc("ngIf",t.line)}}function O(t,e){1&t&&(h.Ub(0,"th",22),h.Lc(1),h.hc(2,"translate"),h.Tb()),2&t&&(h.Cb(1),h.Nc(" ",h.ic(2,1,"TABLE.HEADER.ID")," "))}function I(t,e){if(1&t&&(h.Ub(0,"td",23),h.Lc(1),h.Tb()),2&t){const t=e.$implicit;h.Cb(1),h.Nc(" ",t.id," ")}}function v(t,e){1&t&&(h.Ub(0,"th",22),h.Lc(1),h.hc(2,"translate"),h.Tb()),2&t&&(h.Cb(1),h.Nc(" ",h.ic(2,1,"TABLE.HEADER.NAME")," "))}function E(t,e){if(1&t&&(h.Ub(0,"td",23),h.Lc(1),h.Tb()),2&t){const t=e.$implicit;h.Cb(1),h.Nc(" ",t.form," ")}}function R(t,e){1&t&&(h.Ub(0,"th",22),h.Lc(1),h.hc(2,"translate"),h.Tb()),2&t&&(h.Cb(1),h.Nc(" ",h.ic(2,1,"TABLE.HEADER.DOMAIN")," "))}function T(t,e){if(1&t&&(h.Ub(0,"td",23),h.Lc(1),h.Tb()),2&t){const t=e.$implicit;h.Cb(1),h.Nc(" ",t.line," ")}}function D(t,e){1&t&&h.Pb(0,"tr",24)}function L(t,e){if(1&t){const t=h.Vb();h.Ub(0,"tr",25),h.cc("click",(function(){h.yc(t);const n=e.index,o=h.gc();return o.highlight(n),o.selectFormByIndex(o.selectedRowIndex)}))("keydown.enter",(function(){h.yc(t);const e=h.gc();return e.selectFormByIndex(e.selectedRowIndex)}))("keydown.arrowdown",(function(){h.yc(t);const e=h.gc();return e.arrowDownEvent(e.selectedRowIndex)}))("keydown.arrowup",(function(){h.yc(t);const e=h.gc();return e.arrowUpEvent(e.selectedRowIndex)})),h.Tb()}if(2&t){const t=e.index,n=h.gc();h.Gc("background",n.selectedRowIndex==t?"lightgray":""),h.nc("tabindex",0)}}let M=(()=>{class t{constructor(t,e,n,o,r,i){this.formSelectionService=t,this.changeDetector=e,this.route=n,this._fuseTranslationLoaderService=o,this.router=r,this.form=i,this.forms=[],this.filteredForm=[],this.displayedColumns=["id","name","domain"],this.productionLineOptions=[{value:"BREEDING",label:"BREEDING"},{value:"FARMING",label:"FARMING"},{value:"PROCESSING",label:"PROCESSING"}],this._fuseTranslationLoaderService.loadTranslations(s,l),this.getForms()}get templateTypeDevice(){return"device"===this.route.snapshot.data.templateType}getForms(){let t=new d.d;this.templateTypeDevice&&(t=t.append("templateType","device")),this.formSelectionService.getForms(t).subscribe(t=>{this.apiOutput=t,this.addId()})}addId(){var t=1;for(let e of this.apiOutput){let n=e;n.id=t,t+=1,this.forms.push(n)}this.forms.sort((t,e)=>{let n=t.name,o=e.name;return n<o?-1:n>o?1:0}),this.dataSource=new a.k(this.forms),this.filteredForm=this.forms,this.changeDetector.detectChanges(),this.focusSearch()}focusSearch(){document.getElementById("searchInput").focus()}highlight(t){t>=0&&t<=this.filteredForm.length-1&&(this.selectedRowIndex=t)}arrowUpEvent(t){this.highlight(t-1)}arrowDownEvent(t){this.highlight(t+1)}filterMyOptions(t){this.filteredForm=this.forms.filter(e=>e.id.toString().indexOf(t)>-1||e.form.toLocaleLowerCase().indexOf(t)>-1),this.dataSource=new a.k(this.filteredForm)}displayWith(t){return t?t.form:""}selectForm(t){t&&this.routeToForm(t)}selectFormByIndex(t){(t=this.filteredForm[t])&&this.routeToForm(t)}reset(){this.filteredForm=this.forms}routeToForm(t){this.reset(),this.form.formVersion=t.form_version,this.router.navigate([t.line,t.form,"create"],{relativeTo:this.route})}}return t.\u0275fac=function(e){return new(e||t)(h.Ob(u.a),h.Ob(h.h),h.Ob(r.a),h.Ob(m.a),h.Ob(r.h),h.Ob(f.a))},t.\u0275cmp=h.Ib({type:t,selectors:[["app-form-selection"]],viewQuery:function(t,e){var n;1&t&&h.Qc(x,!0),2&t&&h.tc(n=h.dc())&&(e.searchInput=n.first)},decls:27,vars:10,consts:[[1,"page-layout","simple","fullwidth"],[1,"content","p-24"],["fxLayout","row",2,"padding","5%"],["fxLayout","column","fxFlex","100"],["fxLayout","row","fxLayoutAlign","center center","fxFlex","",1,"ml-sm-32"],[1,"search-wrapper","mt-16","mt-sm-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"search"],["matInput","","id","searchInput",3,"ngModel","placeholder","matAutocomplete","ngModelChange"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[2,"margin-top","5%"],["mat-table","",3,"dataSource","focusin","focusout"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","domain"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","highlight",3,"background","tabindex","click","keydown.enter","keydown.arrowdown","keydown.arrowup",4,"matRowDef","matRowDefColumns"],[3,"value"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"highlight",3,"tabindex","click","keydown.enter","keydown.arrowdown","keydown.arrowup"]],template:function(t,e){if(1&t&&(h.Ub(0,"div",0),h.Ub(1,"div",1),h.Ub(2,"div",2),h.Ub(3,"div",3),h.Ub(4,"div",4),h.Ub(5,"div",5),h.Ub(6,"div",6),h.Ub(7,"mat-icon"),h.Lc(8,"search"),h.Tb(),h.Ub(9,"input",7),h.cc("ngModelChange",(function(t){return e.searchWord=t}))("ngModelChange",(function(t){return e.filterMyOptions(t)})),h.hc(10,"translate"),h.Tb(),h.Ub(11,"mat-autocomplete",8,9),h.cc("optionSelected",(function(t){return e.selectForm(t.option.value)})),h.Jc(13,F,3,3,"mat-option",10),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(14,"div",11),h.Ub(15,"table",12),h.cc("focusin",(function(){return e.highlight(0)}))("focusout",(function(){return e.selectedRowIndex=null})),h.Sb(16,13),h.Jc(17,O,3,3,"th",14),h.Jc(18,I,2,1,"td",15),h.Rb(),h.Sb(19,16),h.Jc(20,v,3,3,"th",14),h.Jc(21,E,2,1,"td",15),h.Rb(),h.Sb(22,17),h.Jc(23,R,3,3,"th",14),h.Jc(24,T,2,1,"td",15),h.Rb(),h.Jc(25,D,1,0,"tr",18),h.Jc(26,L,1,3,"tr",19),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb()),2&t){const t=h.uc(12);h.Cb(9),h.oc("placeholder",h.ic(10,8,"FORM_FIELD.INPUT.PLACEHOLDER.SEARCH_FOR_FORM")),h.nc("ngModel",e.searchWord)("matAutocomplete",t),h.Cb(2),h.nc("displayWith",e.displayWith),h.Cb(2),h.nc("ngForOf",e.filteredForm),h.Cb(2),h.nc("dataSource",e.dataSource),h.Cb(10),h.nc("matHeaderRowDef",e.displayedColumns),h.Cb(1),h.nc("matRowDefColumns",e.displayedColumns)}},directives:[b.c,b.a,b.b,p.a,g.d,w.c,g.s,g.v,w.a,o.s,a.j,a.c,a.e,a.b,a.g,a.i,C.o,o.t,a.d,a.a,a.f,a.h],pipes:[c.c],styles:["table[_ngcontent-%COMP%]{width:100%}tr[_ngcontent-%COMP%]:focus{outline:none}mat-card[_ngcontent-%COMP%]{height:100%}.highlight[_ngcontent-%COMP%]:hover{background:#f5f5f5;cursor:pointer}.search-wrapper[_ngcontent-%COMP%]{background-color:#fff;width:100%;max-width:480px;border-radius:28px;overflow:hidden;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.search-wrapper[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{width:100%;height:48px;line-height:48px;padding:0 18px}.search-wrapper[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:48px;min-height:48px;max-height:48px;padding:0 16px;border:none;outline:none}"]}),t})();var A=n("MutI"),U=n("WJ5W"),N=n("d3UM"),S=n("kmnG"),k=n("Wp6s");const _=[{path:"",component:M}];let P=(()=>{class t{}return t.\u0275mod=h.Mb({type:t}),t.\u0275inj=h.Lb({factory:function(e){return new(e||t)},imports:[[o.c,r.l.forChild(_),c.b,i.a,N.b,A.c,a.l,U.b,S.e,p.b,k.d,w.b]]}),t})()}}]);