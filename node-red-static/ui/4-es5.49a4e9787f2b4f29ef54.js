!function(){function e(e,n){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){a&&(e=a);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){s=!0,r=e},f:function(){try{c||null==a.return||a.return()}finally{if(s)throw r}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function n(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function a(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return r(this,n)}}function r(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{Vo00:function(t,n,c){"use strict";c.r(n),c.d(n,"FormHistoryModule",(function(){return Re}));var l=c("ofXK"),u=c("tyNb"),p={lang:"en",data:{FORM_HISTORY:{SUBMISSION_HISTORY:"Form Submission History",SUBMIT_DATE:"Submission Date",LINE:"Production Line",FORM:"Workstation Form",SEARCH:"Search",SEARCH_FOR_FORM:"Search for Form",START_DATE:"Start Date",END_DATE:"End Date",DATE_RANGE:"Submission Date Range"}}},d={lang:"my",data:{FORM_HISTORY:{SUBMISSION_HISTORY:"Sejarah Penyerahan Borang",SUBMIT_DATE:"Tarikh penyerahan",LINE:"Barisan pengeluaran",FORM:"Borang Stesen Kerja",SEARCH:"Cari",SEARCH_FOR_FORM:"Mencari Borang",START_DATE:"Tarikh mula",END_DATE:"Tarikh tamat",DATE_RANGE:"Julat Tarikh Penghantaran"}}},g=c("fXoL"),f=c("bTqV"),b=c("d3UM"),h=c("Qu3c"),m=c("8LU1"),y=c("XNiG"),v=c("FKr1"),T=c("kmnG");function S(e,t){if(1&e&&(g.Ub(0,"mat-option",19),g.Lc(1),g.Tb()),2&e){var n=t.$implicit;g.nc("value",n),g.Cb(1),g.Nc(" ",n," ")}}function _(e,t){if(1&e){var n=g.Vb();g.Ub(0,"mat-form-field",16),g.Ub(1,"mat-select",17),g.cc("selectionChange",(function(e){return g.yc(n),g.gc(2)._changePageSize(e.value)})),g.Jc(2,S,2,2,"mat-option",18),g.Tb(),g.Tb()}if(2&e){var a=g.gc(2);g.nc("appearance",a._formFieldAppearance)("color",a.color),g.Cb(1),g.nc("value",a.pageSize)("disabled",a.disabled)("aria-label",a._intl.itemsPerPageLabel),g.Cb(1),g.nc("ngForOf",a._displayedPageSizeOptions)}}function x(e,t){if(1&e&&(g.Ub(0,"div",20),g.Lc(1),g.Tb()),2&e){var n=g.gc(2);g.Cb(1),g.Mc(n.pageSize)}}function w(e,t){if(1&e&&(g.Ub(0,"div",12),g.Ub(1,"div",13),g.Lc(2),g.Tb(),g.Jc(3,_,3,6,"mat-form-field",14),g.Jc(4,x,2,1,"div",15),g.Tb()),2&e){var n=g.gc();g.Cb(2),g.Nc(" ",n._intl.itemsPerPageLabel," "),g.Cb(1),g.nc("ngIf",n._displayedPageSizeOptions.length>1),g.Cb(1),g.nc("ngIf",n._displayedPageSizeOptions.length<=1)}}function O(e,t){if(1&e){var n=g.Vb();g.Ub(0,"button",21),g.cc("click",(function(){return g.yc(n),g.gc().firstPage()})),g.fc(),g.Ub(1,"svg",7),g.Pb(2,"path",22),g.Tb(),g.Tb()}if(2&e){var a=g.gc();g.nc("matTooltip",a._intl.firstPageLabel)("matTooltipDisabled",a._previousButtonsDisabled())("matTooltipPosition","above")("disabled",a._previousButtonsDisabled()),g.Db("aria-label",a._intl.firstPageLabel)}}function C(e,t){if(1&e){var n=g.Vb();g.fc(),g.ec(),g.Ub(0,"button",23),g.cc("click",(function(){return g.yc(n),g.gc().lastPage()})),g.fc(),g.Ub(1,"svg",7),g.Pb(2,"path",24),g.Tb(),g.Tb()}if(2&e){var a=g.gc();g.nc("matTooltip",a._intl.lastPageLabel)("matTooltipDisabled",a._nextButtonsDisabled())("matTooltipPosition","above")("disabled",a._nextButtonsDisabled()),g.Db("aria-label",a._intl.lastPageLabel)}}var P,k,I,M,L=((P=function e(){s(this,e),this.changes=new y.a,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=function(e,t,n){if(0==n||0==t)return"0 of "+n;var a=e*t;return"".concat(a+1," \u2013 ").concat(a<(n=Math.max(n,0))?Math.min(a+t,n):a+t," of ").concat(n)}}).\u0275fac=function(e){return new(e||P)},P.\u0275prov=Object(g.Kb)({factory:function(){return new P},token:P,providedIn:"root"}),P),D={provide:L,deps:[[new g.C,new g.L,L]],useFactory:function(e){return e||new L}},z=new g.s("MAT_PAGINATOR_DEFAULT_OPTIONS"),F=Object(v.A)(Object(v.C)((function e(){s(this,e)}))),R=((I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=o(n);function n(e,a,i){var o;if(s(this,n),(o=t.call(this))._intl=e,o._changeDetectorRef=a,o._pageIndex=0,o._length=0,o._pageSizeOptions=[],o._hidePageSize=!1,o._showFirstLastButtons=!1,o.page=new g.o,o._intlChanges=e.changes.subscribe((function(){return o._changeDetectorRef.markForCheck()})),i){var c=i.pageSize,l=i.pageSizeOptions,u=i.hidePageSize,p=i.showFirstLastButtons,d=i.formFieldAppearance;null!=c&&(o._pageSize=c),null!=l&&(o._pageSizeOptions=l),null!=u&&(o._hidePageSize=u),null!=p&&(o._showFirstLastButtons=p),null!=d&&(o._formFieldAppearance=d)}return r(o)}return a(n,[{key:"ngOnInit",value:function(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}},{key:"ngOnDestroy",value:function(){this._intlChanges.unsubscribe()}},{key:"nextPage",value:function(){if(this.hasNextPage()){var e=this.pageIndex;this.pageIndex++,this._emitPageEvent(e)}}},{key:"previousPage",value:function(){if(this.hasPreviousPage()){var e=this.pageIndex;this.pageIndex--,this._emitPageEvent(e)}}},{key:"firstPage",value:function(){if(this.hasPreviousPage()){var e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}}},{key:"lastPage",value:function(){if(this.hasNextPage()){var e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}}},{key:"hasPreviousPage",value:function(){return this.pageIndex>=1&&0!=this.pageSize}},{key:"hasNextPage",value:function(){var e=this.getNumberOfPages()-1;return this.pageIndex<e&&0!=this.pageSize}},{key:"getNumberOfPages",value:function(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}},{key:"_changePageSize",value:function(e){var t=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/e)||0,this.pageSize=e,this._emitPageEvent(t)}},{key:"_nextButtonsDisabled",value:function(){return this.disabled||!this.hasNextPage()}},{key:"_previousButtonsDisabled",value:function(){return this.disabled||!this.hasPreviousPage()}},{key:"_updateDisplayedPageSizeOptions",value:function(){this._initialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((function(e,t){return e-t})),this._changeDetectorRef.markForCheck())}},{key:"_emitPageEvent",value:function(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}},{key:"pageIndex",get:function(){return this._pageIndex},set:function(e){this._pageIndex=Math.max(Object(m.f)(e),0),this._changeDetectorRef.markForCheck()}},{key:"length",get:function(){return this._length},set:function(e){this._length=Object(m.f)(e),this._changeDetectorRef.markForCheck()}},{key:"pageSize",get:function(){return this._pageSize},set:function(e){this._pageSize=Math.max(Object(m.f)(e),0),this._updateDisplayedPageSizeOptions()}},{key:"pageSizeOptions",get:function(){return this._pageSizeOptions},set:function(e){this._pageSizeOptions=(e||[]).map((function(e){return Object(m.f)(e)})),this._updateDisplayedPageSizeOptions()}},{key:"hidePageSize",get:function(){return this._hidePageSize},set:function(e){this._hidePageSize=Object(m.c)(e)}},{key:"showFirstLastButtons",get:function(){return this._showFirstLastButtons},set:function(e){this._showFirstLastButtons=Object(m.c)(e)}}]),n}(F)).\u0275fac=function(e){return new(e||I)(g.Ob(L),g.Ob(g.h),g.Ob(z,8))},I.\u0275cmp=g.Ib({type:I,selectors:[["mat-paginator"]],hostAttrs:[1,"mat-paginator"],inputs:{disabled:"disabled",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",color:"color"},outputs:{page:"page"},exportAs:["matPaginator"],features:[g.zb],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(e,t){1&e&&(g.Ub(0,"div",0),g.Ub(1,"div",1),g.Jc(2,w,5,3,"div",2),g.Ub(3,"div",3),g.Ub(4,"div",4),g.Lc(5),g.Tb(),g.Jc(6,O,3,5,"button",5),g.Ub(7,"button",6),g.cc("click",(function(){return t.previousPage()})),g.fc(),g.Ub(8,"svg",7),g.Pb(9,"path",8),g.Tb(),g.Tb(),g.ec(),g.Ub(10,"button",9),g.cc("click",(function(){return t.nextPage()})),g.fc(),g.Ub(11,"svg",7),g.Pb(12,"path",10),g.Tb(),g.Tb(),g.Jc(13,C,3,5,"button",11),g.Tb(),g.Tb(),g.Tb()),2&e&&(g.Cb(2),g.nc("ngIf",!t.hidePageSize),g.Cb(3),g.Nc(" ",t._intl.getRangeLabel(t.pageIndex,t.pageSize,t.length)," "),g.Cb(1),g.nc("ngIf",t.showFirstLastButtons),g.Cb(1),g.nc("matTooltip",t._intl.previousPageLabel)("matTooltipDisabled",t._previousButtonsDisabled())("matTooltipPosition","above")("disabled",t._previousButtonsDisabled()),g.Db("aria-label",t._intl.previousPageLabel),g.Cb(3),g.nc("matTooltip",t._intl.nextPageLabel)("matTooltipDisabled",t._nextButtonsDisabled())("matTooltipPosition","above")("disabled",t._nextButtonsDisabled()),g.Db("aria-label",t._intl.nextPageLabel),g.Cb(3),g.nc("ngIf",t.showFirstLastButtons))},directives:[l.t,f.b,h.a,T.c,b.a,l.s,v.o],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}\n"],encapsulation:2,changeDetection:0}),I),U=((k=function e(){s(this,e)}).\u0275mod=g.Mb({type:k}),k.\u0275inj=g.Lb({factory:function(e){return new(e||k)},providers:[D],imports:[[l.c,f.c,b.b,h.b]]}),k),E=c("1yaQ"),A=c("gPJw"),N=c("tk/3"),B=c("4WDQ"),H=((M=function(){function e(t,n){s(this,e),this.http=t,this.global=n}return a(e,[{key:"getSubmissionHistory",value:function(e){var t=new N.d;return e&&(t=(t=t.append("pageSize",e.pageSize)).append("page",e.page),e.startDate&&(t=t.append("date.greaterOrEqualThan",e.startDate)),e.endDate&&(t=t.append("date.lessOrEqualThan",e.endDate)),e.form&&(t=t.append("forms.equals",e.form)),e.productionLine&&(t=t.append("productionLine.equals",e.productionLine)),e.templateType&&(t=t.append("templateType",e.templateType))),console.log(t),this.http.get("/api/".concat(this.global.tenant,"/forms/history"),{params:t})}}]),e}()).\u0275fac=function(e){return new(e||M)(g.Yb(N.b),g.Yb(B.a))},M.\u0275prov=g.Kb({token:M,factory:M.\u0275fac,providedIn:"root"}),M),J=c("7Wwi"),Y=c("hw3O"),j=c("EwFO"),$=c("XiUz"),V=c("NFeN"),q=c("7EHt"),W=c("3Pt+"),G=c("/1cH"),K=c("iadO"),Q=c("+0xr"),X=c("sYmb");function Z(e,t){if(1&e&&(g.Ub(0,"span"),g.Lc(1),g.Tb()),2&e){var n=g.gc().$implicit;g.Cb(1),g.Nc("(",n.line,")")}}function ee(e,t){if(1&e&&(g.Ub(0,"mat-option",27),g.Lc(1),g.Jc(2,Z,2,1,"span",28),g.Tb()),2&e){var n=t.$implicit;g.nc("value",n),g.Cb(1),g.Nc(" ",n.form," "),g.Cb(1),g.nc("ngIf",n.line)}}function te(e,t){1&e&&(g.Ub(0,"mat-header-cell",41),g.Lc(1),g.hc(2,"translate"),g.Tb()),2&e&&(g.Cb(1),g.Mc(g.ic(2,1,"FORM_HISTORY.SUBMIT_DATE")))}function ne(e,t){if(1&e){var n=g.Vb();g.Ub(0,"mat-cell"),g.Ub(1,"p",42),g.cc("click",(function(){g.yc(n);var e=t.$implicit;return g.gc(2).editForm(e)})),g.Lc(2),g.hc(3,"date"),g.Tb(),g.Tb()}if(2&e){var a=t.$implicit;g.Cb(2),g.Nc(" ",g.jc(3,1,a.submission_timestamp,"dd-MMM-yyyy, HH:mm:ss")," ")}}function ae(e,t){1&e&&(g.Ub(0,"mat-header-cell",41),g.Lc(1),g.hc(2,"translate"),g.Tb()),2&e&&(g.Cb(1),g.Mc(g.ic(2,1,"FORM_HISTORY.LINE")))}function ie(e,t){if(1&e){var n=g.Vb();g.Ub(0,"mat-cell"),g.Ub(1,"p",42),g.cc("click",(function(){g.yc(n);var e=t.$implicit;return g.gc(2).editForm(e)})),g.Lc(2),g.Tb(),g.Tb()}if(2&e){var a=t.$implicit;g.Cb(2),g.Nc(" ",a.productionLine," ")}}function oe(e,t){1&e&&(g.Ub(0,"mat-header-cell",41),g.Lc(1),g.hc(2,"translate"),g.Tb()),2&e&&(g.Cb(1),g.Mc(g.ic(2,1,"FORM_HISTORY.FORM")))}function re(e,t){if(1&e){var n=g.Vb();g.Ub(0,"mat-cell"),g.Ub(1,"p",42),g.cc("click",(function(){g.yc(n);var e=t.$implicit;return g.gc(2).editForm(e)})),g.Lc(2),g.Tb(),g.Tb()}if(2&e){var a=t.$implicit;g.Cb(2),g.Nc(" ",a.workstationForm," ")}}function ce(e,t){1&e&&g.Pb(0,"mat-header-row")}function se(e,t){if(1&e){var n=g.Vb();g.Ub(0,"mat-row",43),g.cc("click",(function(){g.yc(n);var e=t.index,a=g.gc(2);return a.highlight(e),a.selectFormByIndex(a.selectedRowIndex)}))("keydown.enter",(function(){g.yc(n);var e=g.gc(2);return e.selectFormByIndex(e.selectedRowIndex)}))("keydown.arrowdown",(function(){g.yc(n);var e=g.gc(2);return e.arrowDownEvent(e.selectedRowIndex)}))("keydown.arrowup",(function(){g.yc(n);var e=g.gc(2);return e.arrowUpEvent(e.selectedRowIndex)})),g.Tb()}if(2&e){var a=t.index,i=g.gc(2);g.Gc("background",i.selectedRowIndex==a?"lightgray":""),g.nc("tabindex",0==a?0:-1)}}function le(e,t){1&e&&(g.Ub(0,"div"),g.Lc(1,"No data"),g.Tb())}var ue=function(){return[5,10,20]};function pe(e,t){if(1&e){var n=g.Vb();g.Ub(0,"div",29),g.Ub(1,"mat-table",30,31),g.cc("matSortChange",(function(e){return g.yc(n),g.gc().sortData(e)}))("focusin",(function(){return g.yc(n),g.gc().highlight(0)}))("focusout",(function(){return g.yc(n),g.gc().selectedRowIndex=null})),g.Sb(3,32),g.Jc(4,te,3,3,"mat-header-cell",33),g.Jc(5,ne,4,4,"mat-cell",34),g.Rb(),g.Sb(6,35),g.Jc(7,ae,3,3,"mat-header-cell",33),g.Jc(8,ie,3,1,"mat-cell",34),g.Rb(),g.Sb(9,36),g.Jc(10,oe,3,3,"mat-header-cell",33),g.Jc(11,re,3,1,"mat-cell",34),g.Rb(),g.Jc(12,ce,1,0,"mat-header-row",37),g.Jc(13,se,1,3,"mat-row",38),g.Tb(),g.Jc(14,le,2,0,"div",28),g.Ub(15,"mat-paginator",39,40),g.cc("page",(function(e){return g.yc(n),g.gc().onPageChange(e)})),g.Tb(),g.Tb()}if(2&e){var a=g.gc();g.Cb(1),g.nc("dataSource",a.dataSource),g.Cb(11),g.nc("matHeaderRowDef",a.displayedColumns),g.Cb(1),g.nc("matRowDefColumns",a.displayedColumns),g.Cb(1),g.nc("ngIf",0===a.dataSource.length),g.Cb(1),g.nc("pageIndex",a.page)("length",a.totalSize)("pageSize",a.pageSize)("pageSizeOptions",g.pc(8,ue))}}function de(e,t){if(1&e&&(g.Ub(0,"mat-header-cell",41),g.Lc(1),g.Tb()),2&e){var n=g.gc().$implicit;g.Cb(1),g.Mc(n.label)}}function ge(e,t){if(1&e){var n=g.Vb();g.Ub(0,"p",50),g.cc("click",(function(){g.yc(n);var e=g.gc(2).$implicit;return g.gc(3).editForm(e)})),g.Lc(1),g.hc(2,"date"),g.Tb()}if(2&e){var a=g.gc(2).$implicit;g.Cb(1),g.Pc(" ",g.jc(2,3,a.submission_timestamp,"dd-MMM-yyyy, HH:mm:ss")," , ",a.productionLine," , ",a.workstationForm," ")}}function fe(e,t){if(1&e){var n=g.Vb();g.Ub(0,"p",42),g.cc("click",(function(){g.yc(n);var e=g.gc(2).$implicit;return g.gc(3).editForm(e)})),g.Lc(1),g.hc(2,"date"),g.Tb()}if(2&e){var a=g.gc().$implicit,i=g.gc().$implicit;g.Cb(1),g.Nc(" ",g.jc(2,1,i[a],"dd-MMM-yyyy, HH:mm:ss")," ")}}function be(e,t){if(1&e){var n=g.Vb();g.Ub(0,"p",42),g.cc("click",(function(){g.yc(n);var e=g.gc(3).$implicit;return g.gc(3).editForm(e)})),g.Lc(1),g.hc(2,"slice"),g.Tb()}if(2&e){var a=g.gc(2).$implicit,i=g.gc().$implicit;g.Cb(1),g.Nc(" ",g.kc(2,1,i[a],0,50),"... ")}}function he(e,t){if(1&e&&(g.Ub(0,"div"),g.Jc(1,be,3,5,"p",49),g.Tb()),2&e){var n=g.gc().$implicit;g.Cb(1),g.nc("ngIf",0==n.includes("timestamp"))}}function me(e,t){if(1&e){var n=g.Vb();g.Ub(0,"p",42),g.cc("click",(function(){g.yc(n);var e=g.gc(3).$implicit;return g.gc(3).editForm(e)})),g.Lc(1),g.Tb()}if(2&e){var a=g.gc(2).$implicit,i=g.gc().$implicit;g.Cb(1),g.Nc(" ",i[a]," ")}}function ye(e,t){if(1&e&&(g.Ub(0,"div"),g.Jc(1,me,2,1,"p",49),g.Tb()),2&e){var n=g.gc().$implicit;g.Cb(1),g.nc("ngIf",0==n.includes("timestamp"))}}function ve(e,t){if(1&e&&(g.Ub(0,"div"),g.Jc(1,ge,3,6,"p",48),g.Jc(2,fe,3,4,"p",49),g.Jc(3,he,2,1,"div",28),g.Jc(4,ye,2,1,"div",28),g.Tb()),2&e){var n=t.$implicit,a=g.gc().$implicit,i=g.gc(3);g.Cb(1),g.nc("ngIf",1==n.includes("common_field")),g.Cb(1),g.nc("ngIf",1==n.includes("timestamp")),g.Cb(1),g.nc("ngIf",i.isLengthMoreThan(a[n],n)),g.Cb(1),g.nc("ngIf",i.isLengthLessThan(a[n],n))}}function Te(e,t){if(1&e&&(g.Ub(0,"mat-cell"),g.Jc(1,ve,5,4,"div",47),g.Tb()),2&e){var n=g.gc().$implicit;g.Cb(1),g.nc("ngForOf",n.keys)}}function Se(e,t){1&e&&(g.Sb(0,46),g.Jc(1,de,2,1,"mat-header-cell",33),g.Jc(2,Te,2,1,"mat-cell",34),g.Rb()),2&e&&g.nc("matColumnDef",t.$implicit.keys[0])}function _e(e,t){1&e&&g.Pb(0,"mat-header-row")}function xe(e,t){if(1&e){var n=g.Vb();g.Ub(0,"mat-row",43),g.cc("click",(function(){g.yc(n);var e=t.index,a=g.gc(2);return a.highlight(e),a.selectFormByIndex(a.selectedRowIndex)}))("keydown.enter",(function(){g.yc(n);var e=g.gc(2);return e.selectFormByIndex(e.selectedRowIndex)}))("keydown.arrowdown",(function(){g.yc(n);var e=g.gc(2);return e.arrowDownEvent(e.selectedRowIndex)}))("keydown.arrowup",(function(){g.yc(n);var e=g.gc(2);return e.arrowUpEvent(e.selectedRowIndex)})),g.Tb()}if(2&e){var a=t.index,i=g.gc(2);g.Gc("background",i.selectedRowIndex==a?"lightgray":""),g.nc("tabindex",0==a?0:-1)}}function we(e,t){1&e&&(g.Ub(0,"div"),g.Lc(1,"No data"),g.Tb())}function Oe(e,t){if(1&e){var n=g.Vb();g.Ub(0,"div",29),g.Ub(1,"mat-table",30,31),g.cc("matSortChange",(function(e){return g.yc(n),g.gc().sortData(e)}))("focusin",(function(){return g.yc(n),g.gc().highlight(0)}))("focusout",(function(){return g.yc(n),g.gc().selectedRowIndex=null})),g.Jc(3,Se,3,1,"ng-container",44),g.Jc(4,_e,1,0,"mat-header-row",37),g.Jc(5,xe,1,3,"mat-row",38),g.Tb(),g.Jc(6,we,2,0,"div",28),g.Ub(7,"mat-paginator",45),g.cc("page",(function(e){return g.yc(n),g.gc().onPageChange(e)})),g.Tb(),g.Tb()}if(2&e){var a=g.gc();g.Cb(1),g.nc("dataSource",a.dataSource),g.Cb(2),g.nc("ngForOf",a.dynamicColumn),g.Cb(1),g.nc("matHeaderRowDef",a.dynamicDisplayedColumn),g.Cb(1),g.nc("matRowDefColumns",a.dynamicDisplayedColumn),g.Cb(1),g.nc("ngIf",0===a.dataSource.length),g.Cb(1),g.nc("length",a.totalSize)("pageSize",a.pageSize)("pageSizeOptions",g.pc(8,ue))}}var Ce,Pe={parse:{dateInput:"LL"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}},ke=((Ce=function(){function t(e,n,a,i,o,r){s(this,t),this._fuseTranslationLoaderService=e,this._service=n,this.formSelectionService=a,this.router=i,this.formService=o,this.activatedRoute=r,this.totalSize=0,this.displayedColumns=["date","line","form"],this.dynamicColumn=[],this.dataSource=[],this.res=[],this.pageSize=10,this.page=0,this.filteredForm=[],this.forms=[],this.dynamicTable=!1,this.dynamicDisplayedColumn=[],this._fuseTranslationLoaderService.loadTranslations(p,d)}return a(t,[{key:"ngOnInit",value:function(){this.getForms(),this.fetch()}},{key:"getForms",value:function(){var e=this,t={};this.hasTemplateType&&(t.templateType=this.templateType),this.formSelectionService.getForms(t).subscribe((function(t){e.apiOutput=t,e.addId()}))}},{key:"addId",value:function(){var t,n=1,a=e(this.apiOutput);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.id=n,n+=1,this.forms.push(i)}}catch(o){a.e(o)}finally{a.f()}this.filteredForm=this.forms}},{key:"filterMyOptions",value:function(e){this.selectedForm=void 0,this.filteredForm=this.forms.filter((function(t){return t.id.toString().indexOf(e)>-1||t.form.toLocaleLowerCase().indexOf(e)>-1}))}},{key:"displayWith",value:function(e){return e?e.form:""}},{key:"selectForm",value:function(e){this.selectedForm=e}},{key:"fetch",value:function(){var e=this,t={};t.page=this.page,t.pageSize=this.pageSize,this.queryStartDate&&(t.startDate=this.queryStartDate.startOf("day").toISOString()),this.queryEndDate&&(t.endDate=this.queryEndDate.endOf("day").toISOString()),this.selectedForm&&(t.form=this.selectedForm.form,t.productionLine=this.selectedForm.line),this.hasTemplateType&&(t.templateType=this.templateType),console.log(t),this._service.getSubmissionHistory(t).subscribe((function(t){if(e.totalSize=t.totalElement,e.res=t.data,e.dataSource=e.res.slice(),e.dynamicDisplayedColumn=[],null!=e.selectedForm)if(t.dynamicColumn){e.dynamicColumn=t.dynamicColumn;for(var n=0;n<e.dynamicColumn.length;n++)e.dynamicDisplayedColumn.push(e.dynamicColumn[n].keys[0]);e.dynamicTable=!0}else e.dynamicTable=!1;else e.dynamicTable=!1}))}},{key:"isLengthMoreThan",value:function(e,t){if("common_field"!=t&&e)return e.length>50}},{key:"isLengthLessThan",value:function(e,t){if("common_field"!=t&&e)return e.length<50}},{key:"onPageChange",value:function(e){this.page=e.pageIndex,this.pageSize=e.pageSize,this.fetch()}},{key:"doSearch",value:function(){this.page=0,this.paginator.pageIndex=0,this.fetch()}},{key:"clearSearchForm",value:function(){this.queryStartDate=void 0,this.queryEndDate=void 0,this.selectedForm=void 0,this.searchWord="",this.page=0,this.filteredForm=this.forms,this.fetch()}},{key:"sortData",value:function(e){var t=this.res.slice();this.sort=e,this.dataSource=e.active&&""!==e.direction?t.sort((function(t,n){var a="asc"===e.direction;switch(e.active){case"user_id":return Ie(t.user_id,n.user_id,a);case"user_name":return Ie(t.user_name,n.user_name,a);case"role":return Ie(t.role,n.role,a);case"in_timestamp":return Ie(t.in_timestamp,n.in_timestamp,a);case"in_submitted_date":return Ie(t.in_submitted_date,n.in_submitted_date,a);case"in_temp":return Ie(t.in_temp,n.in_temp,a);default:return 0}})):t}},{key:"editForm",value:function(e){var t;this.formService.selectedId=e._id,t=this.hasTemplateType?["../device-class",e.productionLine,e.workstationForm,"edit"]:["../type",e.productionLine,e.workstationForm,"edit"],this.router.navigate(t,{relativeTo:this.activatedRoute})}},{key:"highlight",value:function(e){e>=0&&e<=this.res.length-1&&(this.selectedRowIndex=e)}},{key:"arrowUpEvent",value:function(e){this.highlight(e-1)}},{key:"arrowDownEvent",value:function(e){this.highlight(e+1)}},{key:"selectFormByIndex",value:function(e){(e=this.res[e])&&this.editForm(e)}},{key:"hasTemplateType",get:function(){return!!this.activatedRoute.snapshot.data.templateType}},{key:"templateType",get:function(){return this.activatedRoute.snapshot.data.templateType}},{key:"templateTypeDevice",get:function(){return"device"===this.activatedRoute.snapshot.data.templateType}}]),t}()).\u0275fac=function(e){return new(e||Ce)(g.Ob(A.a),g.Ob(H),g.Ob(J.a),g.Ob(u.h),g.Ob(Y.a),g.Ob(u.a))},Ce.\u0275cmp=g.Ib({type:Ce,selectors:[["app-form-history"]],viewQuery:function(e,t){var n;1&e&&g.Qc(R,!0),2&e&&g.tc(n=g.dc())&&(t.paginator=n.first)},features:[g.Bb([{provide:v.c,useClass:E.c,deps:[v.f,E.a]},{provide:v.e,useValue:Pe}])],decls:51,vars:35,consts:[["id","contacts","fusePerfectScrollbar","",1,"page-layout","simple","fullwidth"],["fxLayout","column","fxLayoutAlign","center center","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","space-between center",1,"header","accent","p-24"],["fxLayout","row","fxLayoutAlign","start center",1,"logo","mb-24","mb-md-0"],[1,"logo-icon","s-32","mr-16"],[1,"logo-text","h1"],[1,"search-wrapper","mx-32","mx-md-0"],[1,"m-24","mb-0",3,"expanded"],["fxLayout","column"],["fxLayout","row","fxFlex",""],[1,"search-wrapper","mt-16","mt-sm-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"search"],["matInput","","id","searchInput",3,"ngModel","placeholder","matAutocomplete","ngModelChange"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row",2,"margin-top","1%"],["appearance","outline",2,"width","100%"],[3,"rangePicker"],["tabindex","-1","readonly","","matStartDate","",3,"ngModel","placeholder","ngModelChange"],["tabindex","-1","readonly","","matEndDate","",3,"ngModel","placeholder","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["type","button","mat-raised-button","","color","primary",3,"click"],["type","button","mat-raised-button","","color","default",3,"click"],[1,"content","p-24","pt-1"],["fusePerfectScrollbar","",1,"center"],["class","content",4,"ngIf"],[3,"value"],[4,"ngIf"],[1,"content"],["matSort","",3,"dataSource","matSortChange","focusin","focusout"],["table",""],["matColumnDef","date"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","line"],["matColumnDef","form"],[4,"matHeaderRowDef"],["class","highlight",3,"background","tabindex","click","keydown.enter","keydown.arrowdown","keydown.arrowup",4,"matRowDef","matRowDefColumns"],[3,"pageIndex","length","pageSize","pageSizeOptions","page"],["paginator",""],["mat-sort-header",""],[1,"text-truncate","font-weight-600",3,"click"],[1,"highlight",3,"tabindex","click","keydown.enter","keydown.arrowdown","keydown.arrowup"],[3,"matColumnDef",4,"ngFor","ngForOf"],[3,"length","pageSize","pageSizeOptions","page"],[3,"matColumnDef"],[4,"ngFor","ngForOf"],["class","text-breakword font-weight-600",3,"click",4,"ngIf"],["class","text-truncate font-weight-600",3,"click",4,"ngIf"],[1,"text-breakword","font-weight-600",3,"click"]],template:function(e,t){if(1&e&&(g.Ub(0,"div",0),g.Ub(1,"div",1),g.Ub(2,"div",2),g.Ub(3,"mat-icon",3),g.Lc(4," history "),g.Tb(),g.Ub(5,"span",4),g.Lc(6),g.hc(7,"translate"),g.Tb(),g.Tb(),g.Pb(8,"div",5),g.Tb(),g.Ub(9,"mat-expansion-panel",6),g.Ub(10,"mat-expansion-panel-header"),g.Ub(11,"mat-panel-title"),g.Lc(12),g.hc(13,"translate"),g.Tb(),g.Tb(),g.Ub(14,"div",7),g.Ub(15,"div",8),g.Ub(16,"div",9),g.Ub(17,"div",10),g.Ub(18,"mat-icon"),g.Lc(19,"search"),g.Tb(),g.Ub(20,"input",11),g.cc("ngModelChange",(function(e){return t.searchWord=e}))("ngModelChange",(function(e){return t.filterMyOptions(e)})),g.hc(21,"translate"),g.Tb(),g.Ub(22,"mat-autocomplete",12,13),g.cc("optionSelected",(function(e){return t.selectForm(e.option.value)})),g.Jc(24,ee,3,3,"mat-option",14),g.Tb(),g.Tb(),g.Tb(),g.Tb(),g.Ub(25,"div",15),g.Ub(26,"mat-form-field",16),g.Ub(27,"mat-label"),g.Lc(28),g.hc(29,"translate"),g.Tb(),g.Ub(30,"mat-date-range-input",17),g.Ub(31,"input",18),g.cc("ngModelChange",(function(e){return t.queryStartDate=e})),g.hc(32,"translate"),g.Tb(),g.Ub(33,"input",19),g.cc("ngModelChange",(function(e){return t.queryEndDate=e})),g.hc(34,"translate"),g.Tb(),g.Tb(),g.Pb(35,"mat-datepicker-toggle",20),g.Pb(36,"mat-date-range-picker",null,21),g.Tb(),g.Tb(),g.Tb(),g.Lc(38," \xa0 "),g.Pb(39,"br"),g.Ub(40,"button",22),g.cc("click",(function(){return t.doSearch()})),g.Lc(41),g.hc(42,"translate"),g.Tb(),g.Lc(43," \xa0 "),g.Ub(44,"button",23),g.cc("click",(function(){return t.clearSearchForm()})),g.Lc(45),g.hc(46,"translate"),g.Tb(),g.Tb(),g.Ub(47,"div",24),g.Ub(48,"div",25),g.Jc(49,pe,17,9,"div",26),g.Jc(50,Oe,8,9,"div",26),g.Tb(),g.Tb(),g.Tb()),2&e){var n=g.uc(23),a=g.uc(37);g.Cb(6),g.Nc(" ",g.ic(7,19,"FORM_HISTORY.SUBMISSION_HISTORY")," "),g.Cb(3),g.nc("expanded",!0),g.Cb(3),g.Nc(" ",g.ic(13,21,"FORM_HISTORY.SEARCH")," "),g.Cb(8),g.oc("placeholder",g.ic(21,23,"FORM_HISTORY.SEARCH_FOR_FORM")),g.nc("ngModel",t.searchWord)("matAutocomplete",n),g.Cb(2),g.nc("displayWith",t.displayWith),g.Cb(2),g.nc("ngForOf",t.filteredForm),g.Cb(4),g.Mc(g.ic(29,25,"FORM_HISTORY.DATE_RANGE")),g.Cb(2),g.nc("rangePicker",a),g.Cb(1),g.oc("placeholder",g.ic(32,27,"FORM_HISTORY.START_DATE")),g.nc("ngModel",t.queryStartDate),g.Cb(2),g.oc("placeholder",g.ic(34,29,"FORM_HISTORY.END_DATE")),g.nc("ngModel",t.queryEndDate),g.Cb(2),g.nc("for",a),g.Cb(6),g.Mc(g.ic(42,31,"Search")),g.Cb(4),g.Mc(g.ic(46,33,"Clear")),g.Cb(4),g.nc("ngIf",!t.dynamicTable),g.Cb(1),g.nc("ngIf",t.dynamicTable)}},directives:[j.a,$.c,$.b,V.a,q.c,q.e,q.f,$.a,W.d,G.c,W.s,W.v,G.a,l.s,T.c,T.g,K.d,K.l,K.k,K.j,T.i,K.e,f.b,l.t,v.o,Q.j,Q.c,Q.e,Q.b,Q.g,Q.i,R,Q.d,Q.a,Q.f,Q.h],pipes:[X.c,l.f,l.E],styles:["#contacts[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:100%;max-width:480px;border-radius:28px;overflow:hidden;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}#contacts[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{width:100%;height:48px;line-height:48px;padding:0 18px}#contacts[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:48px;min-height:48px;max-height:48px;padding:0 16px;border:none;outline:none}#contacts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{overflow:hidden}#contacts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]:not(.locked-open){background:#fff}#contacts[_ngcontent-%COMP%]   .text-breakword[_ngcontent-%COMP%]{word-wrap:break-word}.highlight[_ngcontent-%COMP%]:hover{background:#f5f5f5;cursor:pointer}.search-wrapper[_ngcontent-%COMP%]{background-color:#fff;width:100%;max-width:480px;border-radius:28px;overflow:hidden;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.search-wrapper[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{width:100%;height:48px;line-height:48px;padding:0 18px}.search-wrapper[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:48px;min-height:48px;max-height:48px;padding:0 16px;border:none;outline:none}"]}),Ce);function Ie(e,t,n){return(e<t?-1:1)*(n?1:-1)}var Me,Le=c("Wp6s"),De=c("MutI"),ze=c("5HBU"),Fe=[{path:"",component:ke}],Re=((Me=function e(){s(this,e)}).\u0275mod=g.Mb({type:Me}),Me.\u0275inj=g.Lb({factory:function(e){return new(e||Me)},imports:[[u.l.forChild(Fe),l.c,X.b,b.b,T.e,V.b,Le.d,G.b,De.c,Q.l,ze.a,U,q.b,f.c,K.i,W.n]]}),Me)}}])}();