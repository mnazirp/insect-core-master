(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{PAky:function(o,i,r){"use strict";r.r(i),r.d(i,"LoginModule",(function(){return R}));var n=r("bTqV"),e=r("bSwM"),t=r("kmnG"),a=r("NFeN"),g=r("qFsG"),l=r("dNgK"),s=r("tyNb"),m=r("5HBU"),p=r("sYmb"),f=r("3Pt+"),d=r("PVWW"),c=r("fXoL"),u=r("0JVi"),b=r("K9xE"),h=r("EE6d"),w=r("Rea6"),x=r("4WDQ"),v=r("XiUz"),y=r("ofXK");function L(o,i){1&o&&(c.Ub(0,"mat-error"),c.Lc(1," Protenga ID is required "),c.Tb())}function k(o,i){1&o&&(c.Ub(0,"mat-error"),c.Lc(1," Protenga ID is too short "),c.Tb())}function T(o,i){1&o&&(c.Ub(0,"mat-error"),c.Lc(1," Protenga ID should be numeric only "),c.Tb())}function U(o,i){1&o&&(c.Ub(0,"mat-error"),c.Lc(1," Password is required "),c.Tb())}function P(o,i){1&o&&(c.Ub(0,"mat-error"),c.Lc(1," Password is too short "),c.Tb())}const _=function(){return{duration:"300ms",y:"100px"}},I=function(o){return{value:"*",params:o}},N=function(){return{duration:"300ms",y:"100px"}},O=function(o){return{value:"*",params:o}},C=[{path:"id",component:(()=>{class o{constructor(o,i,r,n,e,t,a,g,l){this._fuseConfigService=o,this._fuseNavigationService=i,this._formBuilder=r,this._login=n,this.translate=e,this._router=t,this.snack=a,this.activatedRoute=g,this.global=l,this.passwordHide=!0,this._fuseConfigService.config={layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}},this._login.isLoggedOn&&this.gotoHome()}ngOnInit(){this.setQueryParams(),this.form=this._formBuilder.group({username:["",[f.z.required,f.z.minLength(5),f.z.pattern("^[0-9]*$")]],password:["",[f.z.required,f.z.minLength(8)]]})}setQueryParams(){this.activatedRoute.queryParams.subscribe(o=>{this.queryParams=o})}onLogin(){this.form.invalid?this.form.markAllAsTouched():this._login.postLogin(this.form.value).subscribe(o=>{this.onLoginSuccess(o)},o=>{this.snack.openDefault("Login not found")})}onLoginSuccess(o){this._login.jwt=o.token,this._login.user=o,this._login.shouldIdleWatcher(),this.translate.use(this._login.user.lang||"en"),this.resetFuseNavigation(),this.redirect()}redirect(){this.queryParams.redirectPath?this._router.navigateByUrl(this.queryParams.redirectPath):this.gotoHome()}resetFuseNavigation(){this._fuseNavigationService.unregister("main"),this._fuseNavigationService.register("main",this._login.getNavigation()),this._fuseNavigationService.setCurrentNavigation("main"),this.global.resetTranslation("login")}gotoHome(){this._router.navigate(["forms","type"])}onKeyDownEsc(o){this.gotoLoginRFID()}gotoLoginRFID(){this._router.navigate(["login","rfid"],{queryParams:{redirectPath:this.queryParams.redirectPath}})}}return o.\u0275fac=function(i){return new(i||o)(c.Ob(u.b),c.Ob(b.a),c.Ob(f.g),c.Ob(h.a),c.Ob(p.d),c.Ob(s.h),c.Ob(w.a),c.Ob(s.a),c.Ob(x.a))},o.\u0275cmp=c.Ib({type:o,selectors:[["login"]],hostBindings:function(o,i){1&o&&c.cc("keydown.esc",(function(o){return i.onKeyDownEsc(o)}),!1,c.wc)},decls:35,vars:16,consts:[["id","login","fxLayout","column"],["id","login-form-wrapper","fxLayout","column","fxLayoutAlign","center center"],["id","login-form"],[1,"logo"],["src","assets/icons/protenga/favicon.png"],[1,"title"],["name","loginForm","novalidate","",3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","formControlName","username"],[4,"ngIf"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","space-between center",1,"remember-forgot-password"],[1,"forgot-password",3,"routerLink"],["mat-raised-button","","color","accent","aria-label","LOG IN","type","submit",1,"submit-button"],[1,"separator"],[1,"text"],["fxLayout","column","fxLayoutAlign","center center",1,"register"],[1,"link","idLogin",3,"routerLink"]],template:function(o,i){1&o&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"div",2),c.Ub(3,"div",3),c.Pb(4,"img",4),c.Tb(),c.Ub(5,"div",5),c.Lc(6,"Insect OS"),c.Tb(),c.Ub(7,"form",6),c.cc("ngSubmit",(function(){return i.onLogin()})),c.Ub(8,"mat-form-field",7),c.Ub(9,"mat-label"),c.Lc(10,"Protenga ID"),c.Tb(),c.Pb(11,"input",8),c.Jc(12,L,2,0,"mat-error",9),c.Jc(13,k,2,0,"mat-error",9),c.Jc(14,T,2,0,"mat-error",9),c.Tb(),c.Ub(15,"mat-form-field",7),c.Ub(16,"mat-label"),c.Lc(17,"Password"),c.Tb(),c.Pb(18,"input",10),c.Ub(19,"button",11),c.cc("click",(function(){return i.passwordHide=!i.passwordHide})),c.Ub(20,"mat-icon"),c.Lc(21),c.Tb(),c.Tb(),c.Jc(22,U,2,0,"mat-error",9),c.Jc(23,P,2,0,"mat-error",9),c.Tb(),c.Ub(24,"div",12),c.Ub(25,"a",13),c.Lc(26," Forgot Password? "),c.Tb(),c.Tb(),c.Ub(27,"button",14),c.Lc(28," LOGIN "),c.Tb(),c.Tb(),c.Ub(29,"div",15),c.Ub(30,"span",16),c.Lc(31,"OR"),c.Tb(),c.Tb(),c.Ub(32,"div",17),c.Ub(33,"a",18),c.Lc(34,"Login Using RFID"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb()),2&o&&(c.Cb(2),c.nc("@animate",c.qc(14,I,c.pc(13,_))),c.Cb(5),c.nc("formGroup",i.form),c.Cb(5),c.nc("ngIf",i.form.get("username").hasError("required")),c.Cb(1),c.nc("ngIf",!i.form.get("username").hasError("pattern")&&i.form.get("username").hasError("minlength")),c.Cb(1),c.nc("ngIf",i.form.get("username").hasError("pattern")),c.Cb(4),c.nc("type",i.passwordHide?"password":"text"),c.Cb(1),c.Db("aria-label","Hide password")("aria-pressed",i.passwordHide),c.Cb(2),c.Mc(i.passwordHide?"visibility_off":"visibility"),c.Cb(1),c.nc("ngIf",i.form.get("password").hasError("required")),c.Cb(1),c.nc("ngIf",i.form.get("password").hasError("minlength")),c.Cb(2),c.nc("routerLink","/forgot-password"),c.Cb(8),c.nc("routerLink","/login/rfid"))},directives:[v.c,v.b,f.A,f.t,f.l,t.c,t.g,g.b,f.d,f.s,f.j,y.t,n.b,t.i,a.a,s.k,t.b],styles:['login #login{width:100%;background:url(dark-material-bg.7341604eddeafc0dae94.jpg) no-repeat;background-size:cover}login #login #login-form-wrapper{flex:1 0 auto;padding:32px}@media screen and (max-width:599px){login #login #login-form-wrapper{padding:16px}}login #login #login-form-wrapper #login-form{width:384px;max-width:384px;padding:32px;text-align:center;box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}@media screen and (max-width:599px){login #login #login-form-wrapper #login-form{padding:24px;width:100%}}login #login #login-form-wrapper #login-form .logo{width:128px;margin:32px auto}login #login #login-form-wrapper #login-form .title{font-size:20px;margin:16px 0 32px}login #login #login-form-wrapper #login-form form{width:100%;text-align:left}login #login #login-form-wrapper #login-form form mat-form-field{width:100%}login #login #login-form-wrapper #login-form form mat-checkbox{margin:0}login #login #login-form-wrapper #login-form form .remember-forgot-password{font-size:13px;margin-top:8px}login #login #login-form-wrapper #login-form form .remember-forgot-password .remember-me{margin-bottom:16px}login #login #login-form-wrapper #login-form form .remember-forgot-password .forgot-password{font-size:13px;font-weight:600;margin-bottom:16px}login #login #login-form-wrapper #login-form form .submit-button{width:220px;margin:16px auto;display:block}@media screen and (max-width:599px){login #login #login-form-wrapper #login-form form .submit-button{width:90%}}login #login #login-form-wrapper #login-form .register{margin:32px auto 24px;font-weight:600}login #login #login-form-wrapper #login-form .register .text{margin-right:8px}login #login #login-form-wrapper #login-form .register .idLogin:focus{text-decoration:underline}login #login #login-form-wrapper #login-form .separator{font-size:15px;font-weight:600;margin:24px auto;position:relative;overflow:hidden;width:100px}login #login #login-form-wrapper #login-form .separator .text{display:inline-flex;position:relative;padding:0 8px;z-index:9999}login #login #login-form-wrapper #login-form .separator .text:after,login #login #login-form-wrapper #login-form .separator .text:before{content:"";display:block;width:30px;position:absolute;top:10px;border-top:1px solid}login #login #login-form-wrapper #login-form .separator .text:before{right:100%}login #login #login-form-wrapper #login-form .separator .text:after{left:100%}login #login #login-form-wrapper #login-form button.facebook,login #login #login-form-wrapper #login-form button.google{width:192px;text-transform:none;color:#fff;font-size:13px}@media screen and (max-width:599px){login #login #login-form-wrapper #login-form button{width:80%}}login #login #login-form-wrapper #login-form button.google{background-color:#d73d32;margin-bottom:8px}login #login #login-form-wrapper #login-form button.facebook{background-color:#3f5c9a}'],encapsulation:2,data:{animation:d.a}}),o})()},{path:"rfid",component:(()=>{class o{constructor(o,i,r,n,e,t,a,g,l){this._fuseConfigService=o,this._formBuilder=i,this._router=r,this._fuseNavigationService=n,this._login=e,this.snack=t,this.global=a,this.activatedRoute=g,this.translate=l,this._fuseConfigService.config={layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}},this._login.isLoggedOn&&this.gotoHome()}get versionNumber(){return this.global.versionNumber}get environmentName(){return this.global.env.environment}ngOnInit(){this.setQueryParams(),this.formRFID=this._formBuilder.group({type:["RFID"],username:["",[f.z.required]]}),this.activatedRoute.queryParams.subscribe(o=>{o.access&&(this.formRFID.get("username").setValue(o.access),this._login.jwt||this.onLoginRfid())})}setQueryParams(){this.activatedRoute.queryParams.subscribe(o=>{this.queryParams=o})}onKeyDown(o){if(new RegExp("^[0-9]+$").test(o.key)){let i=this.formRFID.get("username");i.setValue(i.value+o.key),i.value&&i.value.length>9?(this.onLoginRfid(),i.reset("")):setTimeout(()=>{i.reset("")},1e3)}}onLoginRfid(){this._login.postLogin(this.formRFID.value).subscribe(o=>{this.formRFID.get("username").reset(""),this.onLoginSuccess(o)},o=>{this.snack.openDefault("Login not found")})}onLoginSuccess(o){this._login.jwt=o.token,this._login.user=o,this._login.shouldIdleWatcher(),this.translate.use(this._login.user.lang||"en"),this.resetFuseNavigation(),this.redirect()}redirect(){this.queryParams.redirectPath?this._router.navigateByUrl(this.queryParams.redirectPath):this.gotoHome()}resetFuseNavigation(){this._fuseNavigationService.unregister("main"),this._fuseNavigationService.register("main",this._login.getNavigation()),this._fuseNavigationService.setCurrentNavigation("main"),this.global.resetTranslation("login")}gotoHome(){this._router.navigate(["forms","type"])}onClickScanRfid(){this.snack.openDefault("Place RFID Tag on the RFID Scanner")}gotoLoginId(){this._router.navigate(["login","id"],{queryParams:{redirectPath:this.queryParams.redirectPath}})}}return o.\u0275fac=function(i){return new(i||o)(c.Ob(u.b),c.Ob(f.g),c.Ob(s.h),c.Ob(b.a),c.Ob(h.a),c.Ob(w.a),c.Ob(x.a),c.Ob(s.a),c.Ob(p.d))},o.\u0275cmp=c.Ib({type:o,selectors:[["login"]],hostBindings:function(o,i){1&o&&c.cc("keydown",(function(o){return i.onKeyDown(o)}),!1,c.wc)},decls:19,vars:7,consts:[["id","login","fxLayout","column"],["id","login-form-wrapper","fxLayout","column","fxLayoutAlign","center center"],["id","login-form"],[1,"logo"],["src","assets/icons/protenga/favicon.png"],[1,"title"],["name","loginForm","novalidate","",3,"formGroup"],["mat-raised-button","","color","accent","aria-label","LOG IN",1,"submit-button",2,"width","100%","height","16vh",3,"click"],[1,"separator"],[1,"text"],["fxLayout","column","fxLayoutAlign","center center",1,"register"],[1,"idLogin",2,"cursor","pointer",3,"click"]],template:function(o,i){1&o&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"div",2),c.Ub(3,"div",3),c.Pb(4,"img",4),c.Tb(),c.Ub(5,"div",5),c.Lc(6),c.Tb(),c.Ub(7,"form",6),c.Ub(8,"button",7),c.cc("click",(function(){return i.onClickScanRfid()})),c.Lc(9," SCAN RFID "),c.Tb(),c.Tb(),c.Ub(10,"div",8),c.Ub(11,"span",9),c.Lc(12,"OR"),c.Tb(),c.Tb(),c.Ub(13,"div",10),c.Ub(14,"a",11),c.cc("click",(function(){return i.gotoLoginId()})),c.Lc(15,"Login Using Protenga ID"),c.Tb(),c.Tb(),c.Ub(16,"div",8),c.Ub(17,"span",9),c.Lc(18),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb()),2&o&&(c.Cb(2),c.nc("@animate",c.qc(5,O,c.pc(4,N))),c.Cb(4),c.Nc("Insect OS - ",i.environmentName,""),c.Cb(1),c.nc("formGroup",i.formRFID),c.Cb(11),c.Mc(i.versionNumber))},directives:[v.c,v.b,f.A,f.t,f.l,n.b],styles:['login #login{width:100%;background:url(dark-material-bg.7341604eddeafc0dae94.jpg) no-repeat;background-size:cover}login #login #login-form-wrapper{flex:1 0 auto;padding:32px}@media screen and (max-width:599px){login #login #login-form-wrapper{padding:16px}}login #login #login-form-wrapper #login-form{width:384px;max-width:384px;padding:32px;text-align:center;box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}@media screen and (max-width:599px){login #login #login-form-wrapper #login-form{padding:24px;width:100%}}login #login #login-form-wrapper #login-form .logo{width:128px;margin:32px auto}login #login #login-form-wrapper #login-form .title{font-size:20px;margin:16px 0 32px}login #login #login-form-wrapper #login-form form{width:100%;text-align:left}login #login #login-form-wrapper #login-form form mat-form-field{width:100%}login #login #login-form-wrapper #login-form form mat-checkbox{margin:0}login #login #login-form-wrapper #login-form form .remember-forgot-password{font-size:13px;margin-top:8px}login #login #login-form-wrapper #login-form form .remember-forgot-password .remember-me{margin-bottom:16px}login #login #login-form-wrapper #login-form form .remember-forgot-password .forgot-password{font-size:13px;font-weight:600;margin-bottom:16px}login #login #login-form-wrapper #login-form form .submit-button{width:220px;margin:16px auto;display:block}@media screen and (max-width:599px){login #login #login-form-wrapper #login-form form .submit-button{width:90%}}login #login #login-form-wrapper #login-form .register{margin:32px auto 24px;font-weight:600}login #login #login-form-wrapper #login-form .register .text{margin-right:8px}login #login #login-form-wrapper #login-form .register .idLogin:focus{text-decoration:underline}login #login #login-form-wrapper #login-form .separator{font-size:15px;font-weight:600;margin:24px auto;position:relative;overflow:hidden;width:100px}login #login #login-form-wrapper #login-form .separator .text{display:inline-flex;position:relative;padding:0 8px;z-index:9999}login #login #login-form-wrapper #login-form .separator .text:after,login #login #login-form-wrapper #login-form .separator .text:before{content:"";display:block;width:30px;position:absolute;top:10px;border-top:1px solid}login #login #login-form-wrapper #login-form .separator .text:before{right:100%}login #login #login-form-wrapper #login-form .separator .text:after{left:100%}login #login #login-form-wrapper #login-form button.facebook,login #login #login-form-wrapper #login-form button.google{width:192px;text-transform:none;color:#fff;font-size:13px}@media screen and (max-width:599px){login #login #login-form-wrapper #login-form button{width:80%}}login #login #login-form-wrapper #login-form button.google{background-color:#d73d32;margin-bottom:8px}login #login #login-form-wrapper #login-form button.facebook{background-color:#3f5c9a}'],encapsulation:2,data:{animation:d.a}}),o})()},{path:"**",redirectTo:"rfid"}],D=[n.c,e.b,t.e,a.b,g.c,l.b];let R=(()=>{class o{}return o.\u0275mod=c.Mb({type:o}),o.\u0275inj=c.Lb({factory:function(i){return new(i||o)},imports:[[s.l.forChild(C),p.b,m.a,D]]}),o})()}}]);