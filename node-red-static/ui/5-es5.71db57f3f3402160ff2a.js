!function(){function e(e,n){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){u=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(u)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{pXbF:function(t,o,i){"use strict";i.r(o),i.d(o,"FormSelectionModule",(function(){return G}));var a=i("ofXK"),c=i("tyNb"),u=i("5HBU"),l=i("sYmb"),s=i("+0xr"),f={lang:"en",data:{FORM_FIELD:{INPUT:{PLACEHOLDER:{SEARCH_FOR_FORM:"Search for form"}}},TABLE:{HEADER:{ID:"ID",NAME:"Name",DOMAIN:"Type"}}}},d={lang:"my",data:{FORM_FIELD:{INPUT:{PLACEHOLDER:{SEARCH_FOR_FORM:"Cari borang"}}},TABLE:{HEADER:{ID:"ID",NAME:"Nama",DOMAIN:"Domain"}}}},h=i("tk/3"),m=i("fXoL"),b=i("7Wwi"),p=i("gPJw"),g=i("hw3O"),y=i("XiUz"),v=i("NFeN"),w=i("3Pt+"),C=i("/1cH"),x=i("FKr1"),O=["searchInput"];function I(e,t){if(1&e&&(m.Ub(0,"span"),m.Lc(1),m.Tb()),2&e){var n=m.gc().$implicit;m.Cb(1),m.Nc("(",n.line,")")}}function E(e,t){if(1&e&&(m.Ub(0,"mat-option",20),m.Lc(1),m.Jc(2,I,2,1,"span",21),m.Tb()),2&e){var n=t.$implicit;m.nc("value",n),m.Cb(1),m.Nc(" ",n.form," "),m.Cb(1),m.nc("ngIf",n.line)}}function F(e,t){1&e&&(m.Ub(0,"th",22),m.Lc(1),m.hc(2,"translate"),m.Tb()),2&e&&(m.Cb(1),m.Nc(" ",m.ic(2,1,"TABLE.HEADER.ID")," "))}function T(e,t){if(1&e&&(m.Ub(0,"td",23),m.Lc(1),m.Tb()),2&e){var n=t.$implicit;m.Cb(1),m.Nc(" ",n.id," ")}}function R(e,t){1&e&&(m.Ub(0,"th",22),m.Lc(1),m.hc(2,"translate"),m.Tb()),2&e&&(m.Cb(1),m.Nc(" ",m.ic(2,1,"TABLE.HEADER.NAME")," "))}function D(e,t){if(1&e&&(m.Ub(0,"td",23),m.Lc(1),m.Tb()),2&e){var n=t.$implicit;m.Cb(1),m.Nc(" ",n.form," ")}}function k(e,t){1&e&&(m.Ub(0,"th",22),m.Lc(1),m.hc(2,"translate"),m.Tb()),2&e&&(m.Cb(1),m.Nc(" ",m.ic(2,1,"TABLE.HEADER.DOMAIN")," "))}function L(e,t){if(1&e&&(m.Ub(0,"td",23),m.Lc(1),m.Tb()),2&e){var n=t.$implicit;m.Cb(1),m.Nc(" ",n.line," ")}}function M(e,t){1&e&&m.Pb(0,"tr",24)}function A(e,t){if(1&e){var n=m.Vb();m.Ub(0,"tr",25),m.cc("click",(function(){m.yc(n);var e=t.index,r=m.gc();return r.highlight(e),r.selectFormByIndex(r.selectedRowIndex)}))("keydown.enter",(function(){m.yc(n);var e=m.gc();return e.selectFormByIndex(e.selectedRowIndex)}))("keydown.arrowdown",(function(){m.yc(n);var e=m.gc();return e.arrowDownEvent(e.selectedRowIndex)}))("keydown.arrowup",(function(){m.yc(n);var e=m.gc();return e.arrowUpEvent(e.selectedRowIndex)})),m.Tb()}if(2&e){var r=t.index,o=m.gc();m.Gc("background",o.selectedRowIndex==r?"lightgray":""),m.nc("tabindex",0)}}var S,U,N=((S=function(){function t(e,r,o,i,a,c){n(this,t),this.formSelectionService=e,this.changeDetector=r,this.route=o,this._fuseTranslationLoaderService=i,this.router=a,this.form=c,this.forms=[],this.filteredForm=[],this.displayedColumns=["id","name","domain"],this.productionLineOptions=[{value:"BREEDING",label:"BREEDING"},{value:"FARMING",label:"FARMING"},{value:"PROCESSING",label:"PROCESSING"}],this._fuseTranslationLoaderService.loadTranslations(f,d),this.getForms()}var o,i,a;return o=t,(i=[{key:"getForms",value:function(){var e=this,t=new h.d;this.templateTypeDevice&&(t=t.append("templateType","device")),this.formSelectionService.getForms(t).subscribe((function(t){e.apiOutput=t,e.addId()}))}},{key:"addId",value:function(){var t,n=1,r=e(this.apiOutput);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.id=n,n+=1,this.forms.push(o)}}catch(i){r.e(i)}finally{r.f()}this.forms.sort((function(e,t){var n=e.name,r=t.name;return n<r?-1:n>r?1:0})),this.dataSource=new s.k(this.forms),this.filteredForm=this.forms,this.changeDetector.detectChanges(),this.focusSearch()}},{key:"focusSearch",value:function(){document.getElementById("searchInput").focus()}},{key:"highlight",value:function(e){e>=0&&e<=this.filteredForm.length-1&&(this.selectedRowIndex=e)}},{key:"arrowUpEvent",value:function(e){this.highlight(e-1)}},{key:"arrowDownEvent",value:function(e){this.highlight(e+1)}},{key:"filterMyOptions",value:function(e){this.filteredForm=this.forms.filter((function(t){return t.id.toString().indexOf(e)>-1||t.form.toLocaleLowerCase().indexOf(e)>-1})),this.dataSource=new s.k(this.filteredForm)}},{key:"displayWith",value:function(e){return e?e.form:""}},{key:"selectForm",value:function(e){e&&this.routeToForm(e)}},{key:"selectFormByIndex",value:function(e){(e=this.filteredForm[e])&&this.routeToForm(e)}},{key:"reset",value:function(){this.filteredForm=this.forms}},{key:"routeToForm",value:function(e){this.reset(),this.form.formVersion=e.form_version,this.router.navigate([e.line,e.form,"create"],{relativeTo:this.route})}},{key:"templateTypeDevice",get:function(){return"device"===this.route.snapshot.data.templateType}}])&&r(o.prototype,i),a&&r(o,a),t}()).\u0275fac=function(e){return new(e||S)(m.Ob(b.a),m.Ob(m.h),m.Ob(c.a),m.Ob(p.a),m.Ob(c.h),m.Ob(g.a))},S.\u0275cmp=m.Ib({type:S,selectors:[["app-form-selection"]],viewQuery:function(e,t){var n;1&e&&m.Qc(O,!0),2&e&&m.tc(n=m.dc())&&(t.searchInput=n.first)},decls:27,vars:10,consts:[[1,"page-layout","simple","fullwidth"],[1,"content","p-24"],["fxLayout","row",2,"padding","5%"],["fxLayout","column","fxFlex","100"],["fxLayout","row","fxLayoutAlign","center center","fxFlex","",1,"ml-sm-32"],[1,"search-wrapper","mt-16","mt-sm-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"search"],["matInput","","id","searchInput",3,"ngModel","placeholder","matAutocomplete","ngModelChange"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[2,"margin-top","5%"],["mat-table","",3,"dataSource","focusin","focusout"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","domain"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","highlight",3,"background","tabindex","click","keydown.enter","keydown.arrowdown","keydown.arrowup",4,"matRowDef","matRowDefColumns"],[3,"value"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"highlight",3,"tabindex","click","keydown.enter","keydown.arrowdown","keydown.arrowup"]],template:function(e,t){if(1&e&&(m.Ub(0,"div",0),m.Ub(1,"div",1),m.Ub(2,"div",2),m.Ub(3,"div",3),m.Ub(4,"div",4),m.Ub(5,"div",5),m.Ub(6,"div",6),m.Ub(7,"mat-icon"),m.Lc(8,"search"),m.Tb(),m.Ub(9,"input",7),m.cc("ngModelChange",(function(e){return t.searchWord=e}))("ngModelChange",(function(e){return t.filterMyOptions(e)})),m.hc(10,"translate"),m.Tb(),m.Ub(11,"mat-autocomplete",8,9),m.cc("optionSelected",(function(e){return t.selectForm(e.option.value)})),m.Jc(13,E,3,3,"mat-option",10),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(14,"div",11),m.Ub(15,"table",12),m.cc("focusin",(function(){return t.highlight(0)}))("focusout",(function(){return t.selectedRowIndex=null})),m.Sb(16,13),m.Jc(17,F,3,3,"th",14),m.Jc(18,T,2,1,"td",15),m.Rb(),m.Sb(19,16),m.Jc(20,R,3,3,"th",14),m.Jc(21,D,2,1,"td",15),m.Rb(),m.Sb(22,17),m.Jc(23,k,3,3,"th",14),m.Jc(24,L,2,1,"td",15),m.Rb(),m.Jc(25,M,1,0,"tr",18),m.Jc(26,A,1,3,"tr",19),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&e){var n=m.uc(12);m.Cb(9),m.oc("placeholder",m.ic(10,8,"FORM_FIELD.INPUT.PLACEHOLDER.SEARCH_FOR_FORM")),m.nc("ngModel",t.searchWord)("matAutocomplete",n),m.Cb(2),m.nc("displayWith",t.displayWith),m.Cb(2),m.nc("ngForOf",t.filteredForm),m.Cb(2),m.nc("dataSource",t.dataSource),m.Cb(10),m.nc("matHeaderRowDef",t.displayedColumns),m.Cb(1),m.nc("matRowDefColumns",t.displayedColumns)}},directives:[y.c,y.a,y.b,v.a,w.d,C.c,w.s,w.v,C.a,a.s,s.j,s.c,s.e,s.b,s.g,s.i,x.o,a.t,s.d,s.a,s.f,s.h],pipes:[l.c],styles:["table[_ngcontent-%COMP%]{width:100%}tr[_ngcontent-%COMP%]:focus{outline:none}mat-card[_ngcontent-%COMP%]{height:100%}.highlight[_ngcontent-%COMP%]:hover{background:#f5f5f5;cursor:pointer}.search-wrapper[_ngcontent-%COMP%]{background-color:#fff;width:100%;max-width:480px;border-radius:28px;overflow:hidden;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.search-wrapper[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{width:100%;height:48px;line-height:48px;padding:0 18px}.search-wrapper[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:48px;min-height:48px;max-height:48px;padding:0 16px;border:none;outline:none}"]}),S),P=i("MutI"),_=i("WJ5W"),H=i("d3UM"),J=i("kmnG"),B=i("Wp6s"),W=[{path:"",component:N}],G=((U=function e(){n(this,e)}).\u0275mod=m.Mb({type:U}),U.\u0275inj=m.Lb({factory:function(e){return new(e||U)},imports:[[a.c,c.l.forChild(W),l.b,u.a,H.b,P.c,s.l,_.b,J.e,v.b,B.d,C.b]]}),U)}}])}();