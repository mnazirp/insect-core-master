(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{ZVj9:function(t,e,a){"use strict";a.r(e),a.d(e,"SampleModule",(function(){return W}));var i=a("tyNb"),o=a("sYmb"),c=a("5HBU"),n=a("tk/3"),l=a("3Pt+"),s=a("wd/R"),b=a("XNiG"),r=a("PqYM"),d=a("eIep"),m=a("un/a"),u=a("w1tV"),f=a("1G5W");const h={lang:"en",data:{SAMPLE:{HELLO:"Hello, World!"}}},p={lang:"tr",data:{SAMPLE:{HELLO:"Merhaba D\xfcnya!"}}};var v=a("fXoL"),U=a("gPJw"),g=a("4WDQ"),L=a("GReN"),T=a("EwFO"),C=a("XiUz"),w=a("kmnG"),D=a("d3UM"),S=a("ofXK"),O=a("FKr1"),y=a("bTqV"),P=a("Wp6s"),I=a("+0xr");function M(t,e){if(1&t&&(v.Ub(0,"mat-option",22),v.Lc(1),v.Tb()),2&t){const t=e.$implicit;v.nc("value",t.value),v.Cb(1),v.Mc(t.label)}}function F(t,e){if(1&t&&(v.Ub(0,"mat-option",22),v.Lc(1),v.Tb()),2&t){const t=e.$implicit;v.nc("value",t.value),v.Cb(1),v.Mc(t.label)}}function J(t,e){if(1&t&&(v.Ub(0,"mat-option",22),v.Lc(1),v.Tb()),2&t){const t=e.$implicit;v.nc("value",t.value),v.Cb(1),v.Mc(t.label)}}function x(t,e){1&t&&(v.Ub(0,"th",23),v.Lc(1," Parameter "),v.Tb())}function R(t,e){if(1&t&&(v.Ub(0,"td",24),v.Lc(1),v.Tb()),2&t){const t=e.$implicit;v.Cb(1),v.Nc(" ",t.parameter," ")}}function N(t,e){1&t&&(v.Ub(0,"th",23),v.Lc(1," Value "),v.Tb())}function j(t,e){if(1&t&&(v.Ub(0,"td",24),v.Lc(1),v.Tb()),2&t){const t=e.$implicit;v.Cb(1),v.Nc(" ",t.value," ")}}function k(t,e){1&t&&(v.Ub(0,"th",23),v.Lc(1," Unit "),v.Tb())}function $(t,e){if(1&t&&(v.Ub(0,"td",24),v.Lc(1),v.Tb()),2&t){const t=e.$implicit;v.Cb(1),v.Nc(" ",t.unit," ")}}function E(t,e){1&t&&v.Pb(0,"tr",25)}function G(t,e){1&t&&v.Pb(0,"tr",26)}function H(t,e){1&t&&(v.Ub(0,"div"),v.Lc(1,"No data"),v.Tb())}const _=[w.e,D.b,O.p,y.c,I.l,P.d],V=[{path:"",component:(()=>{class t{constructor(t,e,a,i,o){this._fuseTranslationLoaderService=t,this.http=e,this.global=a,this.momentUtil=i,this.activatedRoute=o,this.displayedColumns=["parameter","value","unit"],this.dataSource=[],this.originalData=[],this.form=new l.k({site:new l.h("chang_chun_facility"),location:new l.h(""),deviceId:new l.h}),this.stopPolling=new b.a,this.eventName="dashboard-sensor",this.sensorOptions=[],this.locationOptions=[],this.siteOptions=[{value:"chang_chun_facility",label:"Chang Chun Facility"}],this._fuseTranslationLoaderService.loadTranslations(h,p),this.activatedRoute.queryParams.subscribe(t=>{this.selectedDeviceId=t.deviceId,this.form.controls.deviceId.setValue(this.selectedDeviceId)})}get selectedSiteLabel(){let t=this.siteOptions.find(t=>t.value===this.selectedSite);return t?t.label:""}get formEmpty(){let t=!0;for(const e in this.form.value)this.form.value[e]&&(t=!1);return t}ngOnInit(){}startPolling(){this.polling=Object(r.a)(1,15e3).pipe(Object(d.a)(()=>this.fetchData(this.selectedDeviceId,this.selectedLocation)),Object(m.a)(),Object(u.a)(),Object(f.a)(this.stopPolling)),this.polling.subscribe(t=>this.handleData(t))}fetchData(t,e){let a={};return e&&(a.location=e),this.http.get(`/api/${this.global.tenant}/forms/dashboard-sensor/${t}`,{headers:{skipLoading:"true"},params:a})}handleData(t){this.selectedSite=this.form.controls.site.value,this.selectedDeviceId=this.form.controls.deviceId.value,this.selectedLocation=this.form.controls.location.value,this.lastUpdated=t.timestamp?s(1e3*t.timestamp).format(this.momentUtil.displayFormat):"",this.dataSource=t.params}filterDataSource(){this.fetchData(this.form.controls.deviceId.value,this.form.controls.location.value).subscribe(t=>this.handleData(t))}ngOnDestroy(){this.stopPolling.next()}submit(){let t=new n.d;for(const e in this.form.value){const a=this.form.value[e];a&&(t=t.append(e,a))}this.http.get(`/api/${this.global.tenant}/iot/dashbord-sensor`,{params:t}).subscribe(t=>{},t=>{this.global.error(t)})}}return t.\u0275fac=function(e){return new(e||t)(v.Ob(U.a),v.Ob(n.b),v.Ob(g.a),v.Ob(L.a),v.Ob(i.a))},t.\u0275cmp=v.Ib({type:t,selectors:[["sample"]],decls:59,vars:13,consts:[["fusePerfectScrollbar","",1,"page-layout","blank","p-24"],["fxLayout","column"],["fxLayout","row","fxLayoutGap","24px",3,"formGroup","ngSubmit"],["appearance","outline","fxFlex","100"],["formControlName","site"],[3,"value",4,"ngFor","ngForOf"],["formControlName","location"],["value",""],["formControlName","deviceId"],["fxFlex","10",2,"padding","0.25em 0.25em calc(21.5px + 0.25em) 0.25em"],["mat-raised-button","","fxFill","","color","accent","type","submit",3,"disabled","click"],[1,"filter"],[2,"float","right"],["mat-table","","fxFlex","",3,"dataSource"],["matColumnDef","parameter"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","unit"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(v.Ub(0,"div",0),v.Ub(1,"div",1),v.Ub(2,"form",2),v.cc("ngSubmit",(function(){return e.filterDataSource()})),v.Ub(3,"mat-form-field",3),v.Ub(4,"mat-label"),v.Lc(5,"Site Filter"),v.Tb(),v.Ub(6,"mat-select",4),v.Jc(7,M,2,2,"mat-option",5),v.Tb(),v.Tb(),v.Ub(8,"mat-form-field",3),v.Ub(9,"mat-label"),v.Lc(10,"Location Filter"),v.Tb(),v.Ub(11,"mat-select",6),v.Ub(12,"mat-option",7),v.Lc(13,"Show all"),v.Tb(),v.Jc(14,F,2,2,"mat-option",5),v.Tb(),v.Tb(),v.Ub(15,"mat-form-field",3),v.Ub(16,"mat-label"),v.Lc(17,"Device ID"),v.Tb(),v.Ub(18,"mat-select",8),v.Jc(19,J,2,2,"mat-option",5),v.Tb(),v.Tb(),v.Ub(20,"div",9),v.Ub(21,"button",10),v.cc("click",(function(){return e.filterDataSource()})),v.Lc(22,"Show"),v.Tb(),v.Tb(),v.Tb(),v.Ub(23,"mat-card",1),v.Ub(24,"table",11),v.Ub(25,"tr"),v.Ub(26,"td",12),v.Lc(27,"Device ID:"),v.Tb(),v.Ub(28,"td"),v.Lc(29),v.Tb(),v.Ub(30,"td",12),v.Lc(31,"Location:"),v.Tb(),v.Ub(32,"td"),v.Lc(33),v.Tb(),v.Ub(34,"td",12),v.Lc(35,"Measurement Timestamp:"),v.Tb(),v.Ub(36,"td"),v.Lc(37),v.Tb(),v.Tb(),v.Ub(38,"tr"),v.Pb(39,"td"),v.Pb(40,"td"),v.Pb(41,"td"),v.Ub(42,"td"),v.Lc(43),v.Tb(),v.Pb(44,"td"),v.Pb(45,"td"),v.Tb(),v.Tb(),v.Ub(46,"table",13),v.Sb(47,14),v.Jc(48,x,2,0,"th",15),v.Jc(49,R,2,1,"td",16),v.Rb(),v.Sb(50,17),v.Jc(51,N,2,0,"th",15),v.Jc(52,j,2,1,"td",16),v.Rb(),v.Sb(53,18),v.Jc(54,k,2,0,"th",15),v.Jc(55,$,2,1,"td",16),v.Rb(),v.Jc(56,E,1,0,"tr",19),v.Jc(57,G,1,0,"tr",20),v.Tb(),v.Jc(58,H,2,0,"div",21),v.Tb(),v.Tb(),v.Tb()),2&t&&(v.Cb(2),v.nc("formGroup",e.form),v.Cb(5),v.nc("ngForOf",e.siteOptions),v.Cb(7),v.nc("ngForOf",e.locationOptions),v.Cb(5),v.nc("ngForOf",e.sensorOptions),v.Cb(2),v.nc("disabled",e.formEmpty),v.Cb(8),v.Mc(e.selectedDeviceId),v.Cb(4),v.Mc(e.selectedSiteLabel),v.Cb(4),v.Mc(e.lastUpdated),v.Cb(6),v.Mc(e.selectedLocation||"Showing all"),v.Cb(3),v.nc("dataSource",e.dataSource),v.Cb(10),v.nc("matHeaderRowDef",e.displayedColumns),v.Cb(1),v.nc("matRowDefColumns",e.displayedColumns),v.Cb(1),v.nc("ngIf",0===e.dataSource.length))},directives:[T.a,C.c,l.A,l.t,C.d,l.l,w.c,C.a,w.g,D.a,l.s,l.j,S.s,O.o,y.b,C.e,P.a,I.j,I.c,I.e,I.b,I.g,I.i,S.t,I.d,I.a,I.f,I.h],styles:[".filter[_ngcontent-%COMP%]{font-size:large;font-weight:700}"]}),t})()}];let W=(()=>{class t{}return t.\u0275mod=v.Mb({type:t}),t.\u0275inj=v.Lb({factory:function(e){return new(e||t)},imports:[[i.l.forChild(V),o.b,c.a,_]]}),t})()}}]);